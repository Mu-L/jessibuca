!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var r,t=(r="undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("decoder-pro-audio-player.js",document.baseURI).href,async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,o,n;(n=e).ready=new Promise(((e,r)=>{t=e,o=r})),(n=void 0!==n?n:{}).locateFile=function(e){return"decoder-pro-audio.wasm"==e&&"undefined"!=typeof JESSIBUCA_PRO_AUDIO_WASM_URL&&""!=JESSIBUCA_PRO_AUDIO_WASM_URL?JESSIBUCA_PRO_AUDIO_WASM_URL:e};var s,a,i,u=Object.assign({},n),l="./this.program",d="object"==typeof window,c="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h="";function p(e){return n.locateFile?n.locateFile(e,h):h+e}if(f){const{createRequire:e}=await import("module");var m=e("undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("decoder-pro-audio-player.js",document.baseURI).href),g=m("fs"),y=m("path");h=c?y.dirname(h)+"/":m("url").fileURLToPath(new URL("./","undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("decoder-pro-audio-player.js",document.baseURI).href)),s=(e,r)=>(e=Q(e)?new URL(e):y.normalize(e),g.readFileSync(e,r?void 0:"utf8")),i=e=>{var r=s(e,!0);return r.buffer||(r=new Uint8Array(r)),r},a=function(e,r,t){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=Q(e)?new URL(e):y.normalize(e),g.readFile(e,o?void 0:"utf8",((e,n)=>{e?t(e):r(o?n.buffer:n)}))},!n.thisProgram&&process.argv.length>1&&(l=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(d||c)&&(c?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),r&&(h=r),h=0!==h.indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},c&&(i=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),a=(e,r,t)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{200==o.status||0==o.status&&o.response?r(o.response):t()},o.onerror=t,o.send(null)});var v,w,b=n.print||console.log.bind(console),E=n.printErr||console.error.bind(console);Object.assign(n,u),u=null,n.arguments&&n.arguments,n.thisProgram&&(l=n.thisProgram),n.quit&&n.quit,n.wasmBinary&&(v=n.wasmBinary),"object"!=typeof WebAssembly&&q("no native wasm support detected");var S,k,C,D,A,_,T,F,P=!1;function $(e,r){e||q(r)}function R(){var e=w.buffer;n.HEAP8=S=new Int8Array(e),n.HEAP16=C=new Int16Array(e),n.HEAPU8=k=new Uint8Array(e),n.HEAPU16=D=new Uint16Array(e),n.HEAP32=A=new Int32Array(e),n.HEAPU32=_=new Uint32Array(e),n.HEAPF32=T=new Float32Array(e),n.HEAPF64=F=new Float64Array(e)}var O=[],W=[],L=[];function x(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)B(n.preRun.shift());ne(O)}function M(){n.noFSInit||Fe.init.initialized||Fe.init(),Fe.ignorePermissions=!1,ne(W)}function U(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)I(n.postRun.shift());ne(L)}function B(e){O.unshift(e)}function j(e){W.unshift(e)}function I(e){L.unshift(e)}var z=0,N=null;function H(e){z++,n.monitorRunDependencies&&n.monitorRunDependencies(z)}function V(e){if(z--,n.monitorRunDependencies&&n.monitorRunDependencies(z),0==z&&N){var r=N;N=null,r()}}function q(e){n.onAbort&&n.onAbort(e),E(e="Aborted("+e+")"),P=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw o(r),r}var G,J,X,K="data:application/octet-stream;base64,",Z=e=>e.startsWith(K),Q=e=>e.startsWith("file://");function Y(e){if(e==G&&v)return new Uint8Array(v);if(i)return i(e);throw"both async and sync fetching of the wasm failed"}function ee(e){if(!v&&(d||c)){if("function"==typeof fetch&&!Q(e))return fetch(e,{credentials:"same-origin"}).then((r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()})).catch((()=>Y(e)));if(a)return new Promise(((r,t)=>{a(e,(e=>r(new Uint8Array(e))),t)}))}return Promise.resolve().then((()=>Y(e)))}function re(e,r,t){return ee(e).then((e=>WebAssembly.instantiate(e,r))).then((e=>e)).then(t,(e=>{E(`failed to asynchronously prepare wasm: ${e}`),q(e)}))}function te(e,r,t,o){return e||"function"!=typeof WebAssembly.instantiateStreaming||Z(r)||Q(r)||f||"function"!=typeof fetch?re(r,t,o):fetch(r,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,t).then(o,(function(e){return E(`wasm streaming compile failed: ${e}`),E("falling back to ArrayBuffer instantiation"),re(r,t,o)}))))}function oe(){var e={a:no};function r(e,r){return so=e.exports,w=so.E,R(),Or=so.H,j(so.F),V(),so}if(H(),n.instantiateWasm)try{return n.instantiateWasm(e,r)}catch(e){E(`Module.instantiateWasm callback failed with error: ${e}`),o(e)}return te(v,G,e,(function(e){r(e.instance)})).catch(o),{}}n.locateFile?Z(G="decoder-pro-audio.wasm")||(G=p(G)):G=new URL("decoder-pro-audio.wasm","undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("decoder-pro-audio-player.js",document.baseURI).href).href;var ne=e=>{for(;e.length>0;)e.shift()(n)};function se(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){_[this.ptr+4>>2]=e},this.get_type=function(){return _[this.ptr+4>>2]},this.set_destructor=function(e){_[this.ptr+8>>2]=e},this.get_destructor=function(){return _[this.ptr+8>>2]},this.set_caught=function(e){e=e?1:0,S[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=S[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,S[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=S[this.ptr+13>>0]},this.init=function(e,r){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(r)},this.set_adjusted_ptr=function(e){_[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return _[this.ptr+16>>2]},this.get_exception_ptr=function(){if(co(this.get_type()))return _[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}n.noExitRuntime;var ae=(e,r,t)=>{throw new se(e).init(r,t),e},ie=e=>(A[io()>>2]=e,e),ue={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,r)=>{for(var t=0,o=e.length-1;o>=0;o--){var n=e[o];"."===n?e.splice(o,1):".."===n?(e.splice(o,1),t++):t&&(e.splice(o,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=ue.isAbs(e),t="/"===e.substr(-1);return(e=ue.normalizeArray(e.split("/").filter((e=>!!e)),!r).join("/"))||r||(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=ue.splitPath(e),t=r[0],o=r[1];return t||o?(o&&(o=o.substr(0,o.length-1)),t+o):"."},basename:e=>{if("/"===e)return"/";var r=(e=(e=ue.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===r?e:e.substr(r+1)},join:function(){var e=Array.prototype.slice.call(arguments);return ue.normalize(e.join("/"))},join2:(e,r)=>ue.normalize(e+"/"+r)},le=()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);if(f)try{var e=m("crypto");if(e.randomFillSync)return r=>e.randomFillSync(r);var r=e.randomBytes;return e=>(e.set(r(e.byteLength)),e)}catch(e){}q("initRandomDevice")},de=e=>(de=le())(e),ce={resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var o=t>=0?arguments[t]:Fe.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";e=o+"/"+e,r=ue.isAbs(o)}return(r?"/":"")+(e=ue.normalizeArray(e.split("/").filter((e=>!!e)),!r).join("/"))||"."},relative:(e,r)=>{function t(e){for(var r=0;r<e.length&&""===e[r];r++);for(var t=e.length-1;t>=0&&""===e[t];t--);return r>t?[]:e.slice(r,t-r+1)}e=ce.resolve(e).substr(1),r=ce.resolve(r).substr(1);for(var o=t(e.split("/")),n=t(r.split("/")),s=Math.min(o.length,n.length),a=s,i=0;i<s;i++)if(o[i]!==n[i]){a=i;break}var u=[];for(i=a;i<o.length;i++)u.push("..");return(u=u.concat(n.slice(a))).join("/")}},fe="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,he=(e,r,t)=>{for(var o=r+t,n=r;e[n]&&!(n>=o);)++n;if(n-r>16&&e.buffer&&fe)return fe.decode(e.subarray(r,n));for(var s="";r<n;){var a=e[r++];if(128&a){var i=63&e[r++];if(192!=(224&a)){var u=63&e[r++];if((a=224==(240&a)?(15&a)<<12|i<<6|u:(7&a)<<18|i<<12|u<<6|63&e[r++])<65536)s+=String.fromCharCode(a);else{var l=a-65536;s+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else s+=String.fromCharCode((31&a)<<6|i)}else s+=String.fromCharCode(a)}return s},pe=[],me=e=>{for(var r=0,t=0;t<e.length;++t){var o=e.charCodeAt(t);o<=127?r++:o<=2047?r+=2:o>=55296&&o<=57343?(r+=4,++t):r+=3}return r},ge=(e,r,t,o)=>{if(!(o>0))return 0;for(var n=t,s=t+o-1,a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),i<=127){if(t>=s)break;r[t++]=i}else if(i<=2047){if(t+1>=s)break;r[t++]=192|i>>6,r[t++]=128|63&i}else if(i<=65535){if(t+2>=s)break;r[t++]=224|i>>12,r[t++]=128|i>>6&63,r[t++]=128|63&i}else{if(t+3>=s)break;r[t++]=240|i>>18,r[t++]=128|i>>12&63,r[t++]=128|i>>6&63,r[t++]=128|63&i}}return r[t]=0,t-n};function ye(e,r,t){var o=t>0?t:me(e)+1,n=new Array(o),s=ge(e,n,0,n.length);return r&&(n.length=s),n}var ve=()=>{if(!pe.length){var e=null;if(f){var r=Buffer.alloc(256),t=0,o=process.stdin.fd;try{t=g.readSync(o,r)}catch(e){if(!e.toString().includes("EOF"))throw e;t=0}e=t>0?r.slice(0,t).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n");if(!e)return null;pe=ye(e,!0)}return pe.shift()},we={ttys:[],init(){},shutdown(){},register(e,r){we.ttys[e]={input:[],output:[],ops:r},Fe.registerDevice(e,we.stream_ops)},stream_ops:{open(e){var r=we.ttys[e.node.rdev];if(!r)throw new Fe.ErrnoError(43);e.tty=r,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,r,t,o,n){if(!e.tty||!e.tty.ops.get_char)throw new Fe.ErrnoError(60);for(var s=0,a=0;a<o;a++){var i;try{i=e.tty.ops.get_char(e.tty)}catch(e){throw new Fe.ErrnoError(29)}if(void 0===i&&0===s)throw new Fe.ErrnoError(6);if(null==i)break;s++,r[t+a]=i}return s&&(e.node.timestamp=Date.now()),s},write(e,r,t,o,n){if(!e.tty||!e.tty.ops.put_char)throw new Fe.ErrnoError(60);try{for(var s=0;s<o;s++)e.tty.ops.put_char(e.tty,r[t+s])}catch(e){throw new Fe.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:e=>ve(),put_char(e,r){null===r||10===r?(b(he(e.output,0)),e.output=[]):0!=r&&e.output.push(r)},fsync(e){e.output&&e.output.length>0&&(b(he(e.output,0)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,r,t)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,r){null===r||10===r?(E(he(e.output,0)),e.output=[]):0!=r&&e.output.push(r)},fsync(e){e.output&&e.output.length>0&&(E(he(e.output,0)),e.output=[])}}},be=e=>{q()},Ee={ops_table:null,mount:e=>Ee.createNode(null,"/",16895,0),createNode(e,r,t,o){if(Fe.isBlkdev(t)||Fe.isFIFO(t))throw new Fe.ErrnoError(63);Ee.ops_table||(Ee.ops_table={dir:{node:{getattr:Ee.node_ops.getattr,setattr:Ee.node_ops.setattr,lookup:Ee.node_ops.lookup,mknod:Ee.node_ops.mknod,rename:Ee.node_ops.rename,unlink:Ee.node_ops.unlink,rmdir:Ee.node_ops.rmdir,readdir:Ee.node_ops.readdir,symlink:Ee.node_ops.symlink},stream:{llseek:Ee.stream_ops.llseek}},file:{node:{getattr:Ee.node_ops.getattr,setattr:Ee.node_ops.setattr},stream:{llseek:Ee.stream_ops.llseek,read:Ee.stream_ops.read,write:Ee.stream_ops.write,allocate:Ee.stream_ops.allocate,mmap:Ee.stream_ops.mmap,msync:Ee.stream_ops.msync}},link:{node:{getattr:Ee.node_ops.getattr,setattr:Ee.node_ops.setattr,readlink:Ee.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ee.node_ops.getattr,setattr:Ee.node_ops.setattr},stream:Fe.chrdev_stream_ops}});var n=Fe.createNode(e,r,t,o);return Fe.isDir(n.mode)?(n.node_ops=Ee.ops_table.dir.node,n.stream_ops=Ee.ops_table.dir.stream,n.contents={}):Fe.isFile(n.mode)?(n.node_ops=Ee.ops_table.file.node,n.stream_ops=Ee.ops_table.file.stream,n.usedBytes=0,n.contents=null):Fe.isLink(n.mode)?(n.node_ops=Ee.ops_table.link.node,n.stream_ops=Ee.ops_table.link.stream):Fe.isChrdev(n.mode)&&(n.node_ops=Ee.ops_table.chrdev.node,n.stream_ops=Ee.ops_table.chrdev.stream),n.timestamp=Date.now(),e&&(e.contents[r]=n,e.timestamp=n.timestamp),n},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){r=Math.max(r,t*(t<1048576?2:1.125)>>>0),0!=t&&(r=Math.max(r,256));var o=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(0==r)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=Fe.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,Fe.isDir(e.mode)?r.size=4096:Fe.isFile(e.mode)?r.size=e.usedBytes:Fe.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){void 0!==r.mode&&(e.mode=r.mode),void 0!==r.timestamp&&(e.timestamp=r.timestamp),void 0!==r.size&&Ee.resizeFileStorage(e,r.size)},lookup(e,r){throw Fe.genericErrors[44]},mknod:(e,r,t,o)=>Ee.createNode(e,r,t,o),rename(e,r,t){if(Fe.isDir(e.mode)){var o;try{o=Fe.lookupNode(r,t)}catch(e){}if(o)for(var n in o.contents)throw new Fe.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=t,r.contents[t]=e,r.timestamp=e.parent.timestamp,e.parent=r},unlink(e,r){delete e.contents[r],e.timestamp=Date.now()},rmdir(e,r){var t=Fe.lookupNode(e,r);for(var o in t.contents)throw new Fe.ErrnoError(55);delete e.contents[r],e.timestamp=Date.now()},readdir(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink(e,r,t){var o=Ee.createNode(e,r,41471,0);return o.link=t,o},readlink(e){if(!Fe.isLink(e.mode))throw new Fe.ErrnoError(28);return e.link}},stream_ops:{read(e,r,t,o,n){var s=e.node.contents;if(n>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-n,o);if(a>8&&s.subarray)r.set(s.subarray(n,n+a),t);else for(var i=0;i<a;i++)r[t+i]=s[n+i];return a},write(e,r,t,o,n,s){if(!o)return 0;var a=e.node;if(a.timestamp=Date.now(),r.subarray&&(!a.contents||a.contents.subarray)){if(s)return a.contents=r.subarray(t,t+o),a.usedBytes=o,o;if(0===a.usedBytes&&0===n)return a.contents=r.slice(t,t+o),a.usedBytes=o,o;if(n+o<=a.usedBytes)return a.contents.set(r.subarray(t,t+o),n),o}if(Ee.expandFileStorage(a,n+o),a.contents.subarray&&r.subarray)a.contents.set(r.subarray(t,t+o),n);else for(var i=0;i<o;i++)a.contents[n+i]=r[t+i];return a.usedBytes=Math.max(a.usedBytes,n+o),o},llseek(e,r,t){var o=r;if(1===t?o+=e.position:2===t&&Fe.isFile(e.node.mode)&&(o+=e.node.usedBytes),o<0)throw new Fe.ErrnoError(28);return o},allocate(e,r,t){Ee.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap(e,r,t,o,n){if(!Fe.isFile(e.node.mode))throw new Fe.ErrnoError(43);var s,a,i=e.node.contents;if(2&n||i.buffer!==S.buffer){if((t>0||t+r<i.length)&&(i=i.subarray?i.subarray(t,t+r):Array.prototype.slice.call(i,t,t+r)),a=!0,!(s=be()))throw new Fe.ErrnoError(48);S.set(i,s)}else a=!1,s=i.byteOffset;return{ptr:s,allocated:a}},msync:(e,r,t,o,n)=>(Ee.stream_ops.write(e,r,0,o,t,!1),0)}},Se=(e,r,t,o)=>{var n=o?"":`al ${e}`;a(e,(t=>{$(t,`Loading data file "${e}" failed (no arrayBuffer).`),r(new Uint8Array(t)),n&&V()}),(r=>{if(!t)throw`Loading data file "${e}" failed.`;t()})),n&&H()},ke=(e,r,t,o,n,s)=>{Fe.createDataFile(e,r,t,o,n,s)},Ce=n.preloadPlugins||[],De=(e,r,t,o)=>{"undefined"!=typeof Browser&&Browser.init();var n=!1;return Ce.forEach((s=>{n||s.canHandle(r)&&(s.handle(e,r,t,o),n=!0)})),n},Ae=(e,r,t,o,n,s,a,i,u,l)=>{var d=r?ce.resolve(ue.join2(e,r)):e;function c(t){function c(t){l&&l(),i||ke(e,r,t,o,n,u),s&&s(),V()}De(t,d,c,(()=>{a&&a(),V()}))||c(t)}H(),"string"==typeof t?Se(t,(e=>c(e)),a):c(t)},_e=e=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===r)throw new Error(`Unknown file open mode: ${e}`);return r},Te=(e,r)=>{var t=0;return e&&(t|=365),r&&(t|=146),t},Fe={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e=ce.resolve(e)))return{path:"",node:null};if(r=Object.assign({follow_mount:!0,recurse_count:0},r),r.recurse_count>8)throw new Fe.ErrnoError(32);for(var t=e.split("/").filter((e=>!!e)),o=Fe.root,n="/",s=0;s<t.length;s++){var a=s===t.length-1;if(a&&r.parent)break;if(o=Fe.lookupNode(o,t[s]),n=ue.join2(n,t[s]),Fe.isMountpoint(o)&&(!a||a&&r.follow_mount)&&(o=o.mounted.root),!a||r.follow)for(var i=0;Fe.isLink(o.mode);){var u=Fe.readlink(n);if(n=ce.resolve(ue.dirname(n),u),o=Fe.lookupPath(n,{recurse_count:r.recurse_count+1}).node,i++>40)throw new Fe.ErrnoError(32)}}return{path:n,node:o}},getPath(e){for(var r;;){if(Fe.isRoot(e)){var t=e.mount.mountpoint;return r?"/"!==t[t.length-1]?`${t}/${r}`:t+r:t}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName(e,r){for(var t=0,o=0;o<r.length;o++)t=(t<<5)-t+r.charCodeAt(o)|0;return(e+t>>>0)%Fe.nameTable.length},hashAddNode(e){var r=Fe.hashName(e.parent.id,e.name);e.name_next=Fe.nameTable[r],Fe.nameTable[r]=e},hashRemoveNode(e){var r=Fe.hashName(e.parent.id,e.name);if(Fe.nameTable[r]===e)Fe.nameTable[r]=e.name_next;else for(var t=Fe.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode(e,r){var t=Fe.mayLookup(e);if(t)throw new Fe.ErrnoError(t,e);for(var o=Fe.hashName(e.id,r),n=Fe.nameTable[o];n;n=n.name_next){var s=n.name;if(n.parent.id===e.id&&s===r)return n}return Fe.lookup(e,r)},createNode(e,r,t,o){var n=new Fe.FSNode(e,r,t,o);return Fe.hashAddNode(n),n},destroyNode(e){Fe.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagsToPermissionString(e){var r=["r","w","rw"][3&e];return 512&e&&(r+="w"),r},nodePermissions:(e,r)=>Fe.ignorePermissions||(!r.includes("r")||292&e.mode)&&(!r.includes("w")||146&e.mode)&&(!r.includes("x")||73&e.mode)?0:2,mayLookup(e){var r=Fe.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate(e,r){try{return Fe.lookupNode(e,r),20}catch(e){}return Fe.nodePermissions(e,"wx")},mayDelete(e,r,t){var o;try{o=Fe.lookupNode(e,r)}catch(e){return e.errno}var n=Fe.nodePermissions(e,"wx");if(n)return n;if(t){if(!Fe.isDir(o.mode))return 54;if(Fe.isRoot(o)||Fe.getPath(o)===Fe.cwd())return 10}else if(Fe.isDir(o.mode))return 31;return 0},mayOpen:(e,r)=>e?Fe.isLink(e.mode)?32:Fe.isDir(e.mode)&&("r"!==Fe.flagsToPermissionString(r)||512&r)?31:Fe.nodePermissions(e,Fe.flagsToPermissionString(r)):44,MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=Fe.MAX_OPEN_FDS;e++)if(!Fe.streams[e])return e;throw new Fe.ErrnoError(33)},getStreamChecked(e){var r=Fe.getStream(e);if(!r)throw new Fe.ErrnoError(8);return r},getStream:e=>Fe.streams[e],createStream(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Fe.FSStream||(Fe.FSStream=function(){this.shared={}},Fe.FSStream.prototype={},Object.defineProperties(Fe.FSStream.prototype,{object:{get(){return this.node},set(e){this.node=e}},isRead:{get(){return 1!=(2097155&this.flags)}},isWrite:{get(){return 0!=(2097155&this.flags)}},isAppend:{get(){return 1024&this.flags}},flags:{get(){return this.shared.flags},set(e){this.shared.flags=e}},position:{get(){return this.shared.position},set(e){this.shared.position=e}}})),e=Object.assign(new Fe.FSStream,e),-1==r&&(r=Fe.nextfd()),e.fd=r,Fe.streams[r]=e,e},closeStream(e){Fe.streams[e]=null},chrdev_stream_ops:{open(e){var r=Fe.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek(){throw new Fe.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,r)=>e<<8|r,registerDevice(e,r){Fe.devices[e]={stream_ops:r}},getDevice:e=>Fe.devices[e],getMounts(e){for(var r=[],t=[e];t.length;){var o=t.pop();r.push(o),t.push.apply(t,o.mounts)}return r},syncfs(e,r){"function"==typeof e&&(r=e,e=!1),Fe.syncFSRequests++,Fe.syncFSRequests>1&&E(`warning: ${Fe.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=Fe.getMounts(Fe.root.mount),o=0;function n(e){return Fe.syncFSRequests--,r(e)}function s(e){if(e)return s.errored?void 0:(s.errored=!0,n(e));++o>=t.length&&n(null)}t.forEach((r=>{if(!r.type.syncfs)return s(null);r.type.syncfs(r,e,s)}))},mount(e,r,t){var o,n="/"===t,s=!t;if(n&&Fe.root)throw new Fe.ErrnoError(10);if(!n&&!s){var a=Fe.lookupPath(t,{follow_mount:!1});if(t=a.path,o=a.node,Fe.isMountpoint(o))throw new Fe.ErrnoError(10);if(!Fe.isDir(o.mode))throw new Fe.ErrnoError(54)}var i={type:e,opts:r,mountpoint:t,mounts:[]},u=e.mount(i);return u.mount=i,i.root=u,n?Fe.root=u:o&&(o.mounted=i,o.mount&&o.mount.mounts.push(i)),u},unmount(e){var r=Fe.lookupPath(e,{follow_mount:!1});if(!Fe.isMountpoint(r.node))throw new Fe.ErrnoError(28);var t=r.node,o=t.mounted,n=Fe.getMounts(o);Object.keys(Fe.nameTable).forEach((e=>{for(var r=Fe.nameTable[e];r;){var t=r.name_next;n.includes(r.mount)&&Fe.destroyNode(r),r=t}})),t.mounted=null;var s=t.mount.mounts.indexOf(o);t.mount.mounts.splice(s,1)},lookup:(e,r)=>e.node_ops.lookup(e,r),mknod(e,r,t){var o=Fe.lookupPath(e,{parent:!0}).node,n=ue.basename(e);if(!n||"."===n||".."===n)throw new Fe.ErrnoError(28);var s=Fe.mayCreate(o,n);if(s)throw new Fe.ErrnoError(s);if(!o.node_ops.mknod)throw new Fe.ErrnoError(63);return o.node_ops.mknod(o,n,r,t)},create:(e,r)=>(r=void 0!==r?r:438,r&=4095,r|=32768,Fe.mknod(e,r,0)),mkdir:(e,r)=>(r=void 0!==r?r:511,r&=1023,r|=16384,Fe.mknod(e,r,0)),mkdirTree(e,r){for(var t=e.split("/"),o="",n=0;n<t.length;++n)if(t[n]){o+="/"+t[n];try{Fe.mkdir(o,r)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,r,t)=>(void 0===t&&(t=r,r=438),r|=8192,Fe.mknod(e,r,t)),symlink(e,r){if(!ce.resolve(e))throw new Fe.ErrnoError(44);var t=Fe.lookupPath(r,{parent:!0}).node;if(!t)throw new Fe.ErrnoError(44);var o=ue.basename(r),n=Fe.mayCreate(t,o);if(n)throw new Fe.ErrnoError(n);if(!t.node_ops.symlink)throw new Fe.ErrnoError(63);return t.node_ops.symlink(t,o,e)},rename(e,r){var t,o,n=ue.dirname(e),s=ue.dirname(r),a=ue.basename(e),i=ue.basename(r);if(t=Fe.lookupPath(e,{parent:!0}).node,o=Fe.lookupPath(r,{parent:!0}).node,!t||!o)throw new Fe.ErrnoError(44);if(t.mount!==o.mount)throw new Fe.ErrnoError(75);var u,l=Fe.lookupNode(t,a),d=ce.relative(e,s);if("."!==d.charAt(0))throw new Fe.ErrnoError(28);if("."!==(d=ce.relative(r,n)).charAt(0))throw new Fe.ErrnoError(55);try{u=Fe.lookupNode(o,i)}catch(e){}if(l!==u){var c=Fe.isDir(l.mode),f=Fe.mayDelete(t,a,c);if(f)throw new Fe.ErrnoError(f);if(f=u?Fe.mayDelete(o,i,c):Fe.mayCreate(o,i))throw new Fe.ErrnoError(f);if(!t.node_ops.rename)throw new Fe.ErrnoError(63);if(Fe.isMountpoint(l)||u&&Fe.isMountpoint(u))throw new Fe.ErrnoError(10);if(o!==t&&(f=Fe.nodePermissions(t,"w")))throw new Fe.ErrnoError(f);Fe.hashRemoveNode(l);try{t.node_ops.rename(l,o,i)}catch(e){throw e}finally{Fe.hashAddNode(l)}}},rmdir(e){var r=Fe.lookupPath(e,{parent:!0}).node,t=ue.basename(e),o=Fe.lookupNode(r,t),n=Fe.mayDelete(r,t,!0);if(n)throw new Fe.ErrnoError(n);if(!r.node_ops.rmdir)throw new Fe.ErrnoError(63);if(Fe.isMountpoint(o))throw new Fe.ErrnoError(10);r.node_ops.rmdir(r,t),Fe.destroyNode(o)},readdir(e){var r=Fe.lookupPath(e,{follow:!0}).node;if(!r.node_ops.readdir)throw new Fe.ErrnoError(54);return r.node_ops.readdir(r)},unlink(e){var r=Fe.lookupPath(e,{parent:!0}).node;if(!r)throw new Fe.ErrnoError(44);var t=ue.basename(e),o=Fe.lookupNode(r,t),n=Fe.mayDelete(r,t,!1);if(n)throw new Fe.ErrnoError(n);if(!r.node_ops.unlink)throw new Fe.ErrnoError(63);if(Fe.isMountpoint(o))throw new Fe.ErrnoError(10);r.node_ops.unlink(r,t),Fe.destroyNode(o)},readlink(e){var r=Fe.lookupPath(e).node;if(!r)throw new Fe.ErrnoError(44);if(!r.node_ops.readlink)throw new Fe.ErrnoError(28);return ce.resolve(Fe.getPath(r.parent),r.node_ops.readlink(r))},stat(e,r){var t=Fe.lookupPath(e,{follow:!r}).node;if(!t)throw new Fe.ErrnoError(44);if(!t.node_ops.getattr)throw new Fe.ErrnoError(63);return t.node_ops.getattr(t)},lstat:e=>Fe.stat(e,!0),chmod(e,r,t){var o;if(!(o="string"==typeof e?Fe.lookupPath(e,{follow:!t}).node:e).node_ops.setattr)throw new Fe.ErrnoError(63);o.node_ops.setattr(o,{mode:4095&r|-4096&o.mode,timestamp:Date.now()})},lchmod(e,r){Fe.chmod(e,r,!0)},fchmod(e,r){var t=Fe.getStreamChecked(e);Fe.chmod(t.node,r)},chown(e,r,t,o){var n;if(!(n="string"==typeof e?Fe.lookupPath(e,{follow:!o}).node:e).node_ops.setattr)throw new Fe.ErrnoError(63);n.node_ops.setattr(n,{timestamp:Date.now()})},lchown(e,r,t){Fe.chown(e,r,t,!0)},fchown(e,r,t){var o=Fe.getStreamChecked(e);Fe.chown(o.node,r,t)},truncate(e,r){if(r<0)throw new Fe.ErrnoError(28);var t;if(!(t="string"==typeof e?Fe.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Fe.ErrnoError(63);if(Fe.isDir(t.mode))throw new Fe.ErrnoError(31);if(!Fe.isFile(t.mode))throw new Fe.ErrnoError(28);var o=Fe.nodePermissions(t,"w");if(o)throw new Fe.ErrnoError(o);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate(e,r){var t=Fe.getStreamChecked(e);if(0==(2097155&t.flags))throw new Fe.ErrnoError(28);Fe.truncate(t.node,r)},utime(e,r,t){var o=Fe.lookupPath(e,{follow:!0}).node;o.node_ops.setattr(o,{timestamp:Math.max(r,t)})},open(e,r,t){if(""===e)throw new Fe.ErrnoError(44);var o;if(t=void 0===t?438:t,t=64&(r="string"==typeof r?_e(r):r)?4095&t|32768:0,"object"==typeof e)o=e;else{e=ue.normalize(e);try{o=Fe.lookupPath(e,{follow:!(131072&r)}).node}catch(e){}}var s=!1;if(64&r)if(o){if(128&r)throw new Fe.ErrnoError(20)}else o=Fe.mknod(e,t,0),s=!0;if(!o)throw new Fe.ErrnoError(44);if(Fe.isChrdev(o.mode)&&(r&=-513),65536&r&&!Fe.isDir(o.mode))throw new Fe.ErrnoError(54);if(!s){var a=Fe.mayOpen(o,r);if(a)throw new Fe.ErrnoError(a)}512&r&&!s&&Fe.truncate(o,0),r&=-131713;var i=Fe.createStream({node:o,path:Fe.getPath(o),flags:r,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return i.stream_ops.open&&i.stream_ops.open(i),!n.logReadFiles||1&r||(Fe.readFiles||(Fe.readFiles={}),e in Fe.readFiles||(Fe.readFiles[e]=1)),i},close(e){if(Fe.isClosed(e))throw new Fe.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Fe.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,r,t){if(Fe.isClosed(e))throw new Fe.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Fe.ErrnoError(70);if(0!=t&&1!=t&&2!=t)throw new Fe.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read(e,r,t,o,n){if(o<0||n<0)throw new Fe.ErrnoError(28);if(Fe.isClosed(e))throw new Fe.ErrnoError(8);if(1==(2097155&e.flags))throw new Fe.ErrnoError(8);if(Fe.isDir(e.node.mode))throw new Fe.ErrnoError(31);if(!e.stream_ops.read)throw new Fe.ErrnoError(28);var s=void 0!==n;if(s){if(!e.seekable)throw new Fe.ErrnoError(70)}else n=e.position;var a=e.stream_ops.read(e,r,t,o,n);return s||(e.position+=a),a},write(e,r,t,o,n,s){if(o<0||n<0)throw new Fe.ErrnoError(28);if(Fe.isClosed(e))throw new Fe.ErrnoError(8);if(0==(2097155&e.flags))throw new Fe.ErrnoError(8);if(Fe.isDir(e.node.mode))throw new Fe.ErrnoError(31);if(!e.stream_ops.write)throw new Fe.ErrnoError(28);e.seekable&&1024&e.flags&&Fe.llseek(e,0,2);var a=void 0!==n;if(a){if(!e.seekable)throw new Fe.ErrnoError(70)}else n=e.position;var i=e.stream_ops.write(e,r,t,o,n,s);return a||(e.position+=i),i},allocate(e,r,t){if(Fe.isClosed(e))throw new Fe.ErrnoError(8);if(r<0||t<=0)throw new Fe.ErrnoError(28);if(0==(2097155&e.flags))throw new Fe.ErrnoError(8);if(!Fe.isFile(e.node.mode)&&!Fe.isDir(e.node.mode))throw new Fe.ErrnoError(43);if(!e.stream_ops.allocate)throw new Fe.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap(e,r,t,o,n){if(0!=(2&o)&&0==(2&n)&&2!=(2097155&e.flags))throw new Fe.ErrnoError(2);if(1==(2097155&e.flags))throw new Fe.ErrnoError(2);if(!e.stream_ops.mmap)throw new Fe.ErrnoError(43);return e.stream_ops.mmap(e,r,t,o,n)},msync:(e,r,t,o,n)=>e.stream_ops.msync?e.stream_ops.msync(e,r,t,o,n):0,munmap:e=>0,ioctl(e,r,t){if(!e.stream_ops.ioctl)throw new Fe.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.flags=r.flags||0,r.encoding=r.encoding||"binary","utf8"!==r.encoding&&"binary"!==r.encoding)throw new Error(`Invalid encoding type "${r.encoding}"`);var t,o=Fe.open(e,r.flags),n=Fe.stat(e).size,s=new Uint8Array(n);return Fe.read(o,s,0,n,0),"utf8"===r.encoding?t=he(s,0):"binary"===r.encoding&&(t=s),Fe.close(o),t},writeFile(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.flags=t.flags||577;var o=Fe.open(e,t.flags,t.mode);if("string"==typeof r){var n=new Uint8Array(me(r)+1),s=ge(r,n,0,n.length);Fe.write(o,n,0,s,void 0,t.canOwn)}else{if(!ArrayBuffer.isView(r))throw new Error("Unsupported data type");Fe.write(o,r,0,r.byteLength,void 0,t.canOwn)}Fe.close(o)},cwd:()=>Fe.currentPath,chdir(e){var r=Fe.lookupPath(e,{follow:!0});if(null===r.node)throw new Fe.ErrnoError(44);if(!Fe.isDir(r.node.mode))throw new Fe.ErrnoError(54);var t=Fe.nodePermissions(r.node,"x");if(t)throw new Fe.ErrnoError(t);Fe.currentPath=r.path},createDefaultDirectories(){Fe.mkdir("/tmp"),Fe.mkdir("/home"),Fe.mkdir("/home/web_user")},createDefaultDevices(){Fe.mkdir("/dev"),Fe.registerDevice(Fe.makedev(1,3),{read:()=>0,write:(e,r,t,o,n)=>o}),Fe.mkdev("/dev/null",Fe.makedev(1,3)),we.register(Fe.makedev(5,0),we.default_tty_ops),we.register(Fe.makedev(6,0),we.default_tty1_ops),Fe.mkdev("/dev/tty",Fe.makedev(5,0)),Fe.mkdev("/dev/tty1",Fe.makedev(6,0));var e=new Uint8Array(1024),r=0,t=()=>(0===r&&(r=de(e).byteLength),e[--r]);Fe.createDevice("/dev","random",t),Fe.createDevice("/dev","urandom",t),Fe.mkdir("/dev/shm"),Fe.mkdir("/dev/shm/tmp")},createSpecialDirectories(){Fe.mkdir("/proc");var e=Fe.mkdir("/proc/self");Fe.mkdir("/proc/self/fd"),Fe.mount({mount(){var r=Fe.createNode(e,"fd",16895,73);return r.node_ops={lookup(e,r){var t=+r,o=Fe.getStreamChecked(t),n={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return n.parent=n,n}},r}},{},"/proc/self/fd")},createStandardStreams(){n.stdin?Fe.createDevice("/dev","stdin",n.stdin):Fe.symlink("/dev/tty","/dev/stdin"),n.stdout?Fe.createDevice("/dev","stdout",null,n.stdout):Fe.symlink("/dev/tty","/dev/stdout"),n.stderr?Fe.createDevice("/dev","stderr",null,n.stderr):Fe.symlink("/dev/tty1","/dev/stderr"),Fe.open("/dev/stdin",0),Fe.open("/dev/stdout",1),Fe.open("/dev/stderr",1)},ensureErrnoError(){Fe.ErrnoError||(Fe.ErrnoError=function(e,r){this.name="ErrnoError",this.node=r,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},Fe.ErrnoError.prototype=new Error,Fe.ErrnoError.prototype.constructor=Fe.ErrnoError,[44].forEach((e=>{Fe.genericErrors[e]=new Fe.ErrnoError(e),Fe.genericErrors[e].stack="<generic error, no stack>"})))},staticInit(){Fe.ensureErrnoError(),Fe.nameTable=new Array(4096),Fe.mount(Ee,{},"/"),Fe.createDefaultDirectories(),Fe.createDefaultDevices(),Fe.createSpecialDirectories(),Fe.filesystems={MEMFS:Ee}},init(e,r,t){Fe.init.initialized=!0,Fe.ensureErrnoError(),n.stdin=e||n.stdin,n.stdout=r||n.stdout,n.stderr=t||n.stderr,Fe.createStandardStreams()},quit(){Fe.init.initialized=!1;for(var e=0;e<Fe.streams.length;e++){var r=Fe.streams[e];r&&Fe.close(r)}},findObject(e,r){var t=Fe.analyzePath(e,r);return t.exists?t.object:null},analyzePath(e,r){try{e=(o=Fe.lookupPath(e,{follow:!r})).path}catch(e){}var t={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var o=Fe.lookupPath(e,{parent:!0});t.parentExists=!0,t.parentPath=o.path,t.parentObject=o.node,t.name=ue.basename(e),o=Fe.lookupPath(e,{follow:!r}),t.exists=!0,t.path=o.path,t.object=o.node,t.name=o.node.name,t.isRoot="/"===o.path}catch(e){t.error=e.errno}return t},createPath(e,r,t,o){e="string"==typeof e?e:Fe.getPath(e);for(var n=r.split("/").reverse();n.length;){var s=n.pop();if(s){var a=ue.join2(e,s);try{Fe.mkdir(a)}catch(e){}e=a}}return a},createFile(e,r,t,o,n){var s=ue.join2("string"==typeof e?e:Fe.getPath(e),r),a=Te(o,n);return Fe.create(s,a)},createDataFile(e,r,t,o,n,s){var a=r;e&&(e="string"==typeof e?e:Fe.getPath(e),a=r?ue.join2(e,r):e);var i=Te(o,n),u=Fe.create(a,i);if(t){if("string"==typeof t){for(var l=new Array(t.length),d=0,c=t.length;d<c;++d)l[d]=t.charCodeAt(d);t=l}Fe.chmod(u,146|i);var f=Fe.open(u,577);Fe.write(f,t,0,t.length,0,s),Fe.close(f),Fe.chmod(u,i)}},createDevice(e,r,t,o){var n=ue.join2("string"==typeof e?e:Fe.getPath(e),r),s=Te(!!t,!!o);Fe.createDevice.major||(Fe.createDevice.major=64);var a=Fe.makedev(Fe.createDevice.major++,0);return Fe.registerDevice(a,{open(e){e.seekable=!1},close(e){o&&o.buffer&&o.buffer.length&&o(10)},read(e,r,o,n,s){for(var a=0,i=0;i<n;i++){var u;try{u=t()}catch(e){throw new Fe.ErrnoError(29)}if(void 0===u&&0===a)throw new Fe.ErrnoError(6);if(null==u)break;a++,r[o+i]=u}return a&&(e.node.timestamp=Date.now()),a},write(e,r,t,n,s){for(var a=0;a<n;a++)try{o(r[t+a])}catch(e){throw new Fe.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}}),Fe.mkdev(n,s,a)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!s)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=ye(s(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new Fe.ErrnoError(29)}},createLazyFile(e,r,t,o,n){function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(e){if(!(e>this.length-1||e<0)){var r=e%this.chunkSize,t=e/this.chunkSize|0;return this.getter(t)[r]}},s.prototype.setDataGetter=function(e){this.getter=e},s.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",t,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+t+". Status: "+e.status);var r,o=Number(e.getResponseHeader("Content-length")),n=(r=e.getResponseHeader("Accept-Ranges"))&&"bytes"===r,s=(r=e.getResponseHeader("Content-Encoding"))&&"gzip"===r,a=1048576;n||(a=o);var i=this;i.setDataGetter((e=>{var r=e*a,n=(e+1)*a-1;if(n=Math.min(n,o-1),void 0===i.chunks[e]&&(i.chunks[e]=((e,r)=>{if(e>r)throw new Error("invalid range ("+e+", "+r+") or no bytes requested!");if(r>o-1)throw new Error("only "+o+" bytes available! programmer error!");var n=new XMLHttpRequest;if(n.open("GET",t,!1),o!==a&&n.setRequestHeader("Range","bytes="+e+"-"+r),n.responseType="arraybuffer",n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.send(null),!(n.status>=200&&n.status<300||304===n.status))throw new Error("Couldn't load "+t+". Status: "+n.status);return void 0!==n.response?new Uint8Array(n.response||[]):ye(n.responseText||"",!0)})(r,n)),void 0===i.chunks[e])throw new Error("doXHR failed!");return i.chunks[e]})),!s&&o||(a=o=1,o=this.getter(0).length,a=o,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=o,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!c)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new s;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var i={isDevice:!1,contents:a}}else i={isDevice:!1,url:t};var u=Fe.createFile(e,r,i,o,n);i.contents?u.contents=i.contents:i.url&&(u.contents=null,u.url=i.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var l={};function d(e,r,t,o,n){var s=e.node.contents;if(n>=s.length)return 0;var a=Math.min(s.length-n,o);if(s.slice)for(var i=0;i<a;i++)r[t+i]=s[n+i];else for(i=0;i<a;i++)r[t+i]=s.get(n+i);return a}return Object.keys(u.stream_ops).forEach((e=>{var r=u.stream_ops[e];l[e]=function(){return Fe.forceLoadFile(u),r.apply(null,arguments)}})),l.read=(e,r,t,o,n)=>(Fe.forceLoadFile(u),d(e,r,t,o,n)),l.mmap=(e,r,t,o,n)=>{Fe.forceLoadFile(u);var s=be();if(!s)throw new Fe.ErrnoError(48);return d(e,S,s,r,t),{ptr:s,allocated:!0}},u.stream_ops=l,u}},Pe=(e,r)=>e?he(k,e,r):"",$e={DEFAULT_POLLMASK:5,calculateAt(e,r,t){if(ue.isAbs(r))return r;var o;if(o=-100===e?Fe.cwd():$e.getStreamFromFD(e).path,0==r.length){if(!t)throw new Fe.ErrnoError(44);return o}return ue.join2(o,r)},doStat(e,r,t){try{var o=e(r)}catch(e){if(e&&e.node&&ue.normalize(r)!==ue.normalize(Fe.getPath(e.node)))return-54;throw e}A[t>>2]=o.dev,A[t+4>>2]=o.mode,_[t+8>>2]=o.nlink,A[t+12>>2]=o.uid,A[t+16>>2]=o.gid,A[t+20>>2]=o.rdev,X=[o.size>>>0,(J=o.size,+Math.abs(J)>=1?J>0?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],A[t+24>>2]=X[0],A[t+28>>2]=X[1],A[t+32>>2]=4096,A[t+36>>2]=o.blocks;var n=o.atime.getTime(),s=o.mtime.getTime(),a=o.ctime.getTime();return X=[Math.floor(n/1e3)>>>0,(J=Math.floor(n/1e3),+Math.abs(J)>=1?J>0?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],A[t+40>>2]=X[0],A[t+44>>2]=X[1],_[t+48>>2]=n%1e3*1e3,X=[Math.floor(s/1e3)>>>0,(J=Math.floor(s/1e3),+Math.abs(J)>=1?J>0?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],A[t+56>>2]=X[0],A[t+60>>2]=X[1],_[t+64>>2]=s%1e3*1e3,X=[Math.floor(a/1e3)>>>0,(J=Math.floor(a/1e3),+Math.abs(J)>=1?J>0?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],A[t+72>>2]=X[0],A[t+76>>2]=X[1],_[t+80>>2]=a%1e3*1e3,X=[o.ino>>>0,(J=o.ino,+Math.abs(J)>=1?J>0?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],A[t+88>>2]=X[0],A[t+92>>2]=X[1],0},doMsync(e,r,t,o,n){if(!Fe.isFile(r.node.mode))throw new Fe.ErrnoError(43);if(2&o)return 0;var s=k.slice(e,e+t);Fe.msync(r,s,n,t,o)},varargs:void 0,get(){var e=A[+$e.varargs>>2];return $e.varargs+=4,e},getp:()=>$e.get(),getStr:e=>Pe(e),getStreamFromFD:e=>Fe.getStreamChecked(e)};function Re(e,r,t){$e.varargs=t;try{var o=$e.getStreamFromFD(e);switch(r){case 0:if((n=$e.get())<0)return-28;for(;Fe.streams[n];)n++;return Fe.createStream(o,n).fd;case 1:case 2:case 6:case 7:return 0;case 3:return o.flags;case 4:var n=$e.get();return o.flags|=n,0;case 5:return n=$e.getp(),C[n+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return ie(28),-1}}catch(e){if(void 0===Fe||"ErrnoError"!==e.name)throw e;return-e.errno}}function Oe(e,r,t,o){$e.varargs=o;try{r=$e.getStr(r),r=$e.calculateAt(e,r);var n=o?$e.get():0;return Fe.open(r,t,n).fd}catch(e){if(void 0===Fe||"ErrnoError"!==e.name)throw e;return-e.errno}}var We,Le,xe,Me=(e,r,t,o,n)=>{},Ue=()=>{for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);We=e},Be=e=>{for(var r="",t=e;k[t];)r+=We[k[t++]];return r},je={},Ie={},ze={},Ne=e=>{throw new Le(e)},He=e=>{throw new xe(e)},Ve=(e,r,t)=>{function o(r){var o=t(r);o.length!==e.length&&He("Mismatched type converter count");for(var n=0;n<e.length;++n)Ge(e[n],o[n])}e.forEach((function(e){ze[e]=r}));var n=new Array(r.length),s=[],a=0;r.forEach(((e,r)=>{Ie.hasOwnProperty(e)?n[r]=Ie[e]:(s.push(e),je.hasOwnProperty(e)||(je[e]=[]),je[e].push((()=>{n[r]=Ie[e],++a===s.length&&o(n)})))})),0===s.length&&o(n)};function qe(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o=r.name;if(e||Ne(`type "${o}" must have a positive integer typeid pointer`),Ie.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;Ne(`Cannot register type '${o}' twice`)}if(Ie[e]=r,delete ze[e],je.hasOwnProperty(e)){var n=je[e];delete je[e],n.forEach((e=>e()))}}function Ge(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return qe(e,r,t)}var Je,Xe=8,Ke=(e,r,t,o)=>{Ge(e,{name:r=Be(r),fromWireType:function(e){return!!e},toWireType:function(e,r){return r?t:o},argPackAdvance:Xe,readValueFromPointer:function(e){return this.fromWireType(k[e])},destructorFunction:null})},Ze=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Qe=e=>{Ne(e.$$.ptrType.registeredClass.name+" instance already deleted")},Ye=!1,er=e=>{},rr=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},tr=e=>{e.count.value-=1,0===e.count.value&&rr(e)},or=(e,r,t)=>{if(r===t)return e;if(void 0===t.baseClass)return null;var o=or(e,r,t.baseClass);return null===o?null:t.downcast(o)},nr={},sr=()=>Object.keys(cr).length,ar=()=>{var e=[];for(var r in cr)cr.hasOwnProperty(r)&&e.push(cr[r]);return e},ir=[],ur=()=>{for(;ir.length;){var e=ir.pop();e.$$.deleteScheduled=!1,e.delete()}},lr=e=>{Je=e,ir.length&&Je&&Je(ur)},dr=()=>{n.getInheritedInstanceCount=sr,n.getLiveInheritedInstances=ar,n.flushPendingDeletes=ur,n.setDelayFunction=lr},cr={},fr=(e,r)=>{for(void 0===r&&Ne("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r},hr=(e,r)=>(r=fr(e,r),cr[r]),pr=(e,r)=>(r.ptrType&&r.ptr||He("makeClassHandle requires ptr and ptrType"),!!r.smartPtrType!=!!r.smartPtr&&He("Both smartPtrType and smartPtr must be specified"),r.count={value:1},gr(Object.create(e,{$$:{value:r}})));function mr(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=hr(this.registeredClass,r);if(void 0!==t){if(0===t.$$.count.value)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var o=t.clone();return this.destructor(e),o}function n(){return this.isSmartPointer?pr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):pr(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var s,a=this.registeredClass.getActualType(r),i=nr[a];if(!i)return n.call(this);s=this.isConst?i.constPointerType:i.pointerType;var u=or(r,this.registeredClass,s.registeredClass);return null===u?n.call(this):this.isSmartPointer?pr(s.registeredClass.instancePrototype,{ptrType:s,ptr:u,smartPtrType:this,smartPtr:e}):pr(s.registeredClass.instancePrototype,{ptrType:s,ptr:u})}var gr=e=>"undefined"==typeof FinalizationRegistry?(gr=e=>e,e):(Ye=new FinalizationRegistry((e=>{tr(e.$$)})),gr=e=>{var r=e.$$;if(r.smartPtr){var t={$$:r};Ye.register(e,t,e)}return e},er=e=>Ye.unregister(e),gr(e)),yr=()=>{Object.assign(vr.prototype,{isAliasOf(e){if(!(this instanceof vr))return!1;if(!(e instanceof vr))return!1;var r=this.$$.ptrType.registeredClass,t=this.$$.ptr;e.$$=e.$$;for(var o=e.$$.ptrType.registeredClass,n=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;o.baseClass;)n=o.upcast(n),o=o.baseClass;return r===o&&t===n},clone(){if(this.$$.ptr||Qe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=gr(Object.create(Object.getPrototypeOf(this),{$$:{value:Ze(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Qe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ne("Object already scheduled for deletion"),er(this),tr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Qe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ne("Object already scheduled for deletion"),ir.push(this),1===ir.length&&Je&&Je(ur),this.$$.deleteScheduled=!0,this}})};function vr(){}var wr=(e,r)=>Object.defineProperty(r,"name",{value:e}),br=(e,r,t)=>{if(void 0===e[r].overloadTable){var o=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||Ne(`Function '${t}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[o.argCount]=o}},Er=(e,r,t)=>{n.hasOwnProperty(e)?((void 0===t||void 0!==n[e].overloadTable&&void 0!==n[e].overloadTable[t])&&Ne(`Cannot register public name '${e}' twice`),br(n,e,e),n.hasOwnProperty(t)&&Ne(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),n[e].overloadTable[t]=r):(n[e]=r,void 0!==t&&(n[e].numArguments=t))},Sr=48,kr=57,Cr=e=>{if(void 0===e)return"_unknown";var r=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return r>=Sr&&r<=kr?`_${e}`:e};function Dr(e,r,t,o,n,s,a,i){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=o,this.baseClass=n,this.getActualType=s,this.upcast=a,this.downcast=i,this.pureVirtualFunctions=[]}var Ar=(e,r,t)=>{for(;r!==t;)r.upcast||Ne(`Expected null or instance of ${t.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e};function _r(e,r){if(null===r)return this.isReference&&Ne(`null is not a valid ${this.name}`),0;r.$$||Ne(`Cannot pass "${ut(r)}" as a ${this.name}`),r.$$.ptr||Ne(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=r.$$.ptrType.registeredClass;return Ar(r.$$.ptr,t,this.registeredClass)}function Tr(e,r){var t;if(null===r)return this.isReference&&Ne(`null is not a valid ${this.name}`),this.isSmartPointer?(t=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,t),t):0;r.$$||Ne(`Cannot pass "${ut(r)}" as a ${this.name}`),r.$$.ptr||Ne(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&Ne(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var o=r.$$.ptrType.registeredClass;if(t=Ar(r.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(void 0===r.$$.smartPtr&&Ne("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:Ne(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var n=r.clone();t=this.rawShare(t,st.toHandle((()=>n.delete()))),null!==e&&e.push(this.rawDestructor,t)}break;default:Ne("Unsupporting sharing policy")}return t}function Fr(e,r){if(null===r)return this.isReference&&Ne(`null is not a valid ${this.name}`),0;r.$$||Ne(`Cannot pass "${ut(r)}" as a ${this.name}`),r.$$.ptr||Ne(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&Ne(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var t=r.$$.ptrType.registeredClass;return Ar(r.$$.ptr,t,this.registeredClass)}function Pr(e){return this.fromWireType(_[e>>2])}var $r=()=>{Object.assign(Rr.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor&&this.rawDestructor(e)},argPackAdvance:Xe,readValueFromPointer:Pr,deleteObject(e){null!==e&&e.delete()},fromWireType:mr})};function Rr(e,r,t,o,n,s,a,i,u,l,d){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=o,this.isSmartPointer=n,this.pointeeType=s,this.sharingPolicy=a,this.rawGetPointee=i,this.rawConstructor=u,this.rawShare=l,this.rawDestructor=d,n||void 0!==r.baseClass?this.toWireType=Tr:o?(this.toWireType=_r,this.destructorFunction=null):(this.toWireType=Fr,this.destructorFunction=null)}var Or,Wr,Lr=(e,r,t)=>{n.hasOwnProperty(e)||He("Replacing nonexistant public symbol"),void 0!==n[e].overloadTable&&void 0!==t?n[e].overloadTable[t]=r:(n[e]=r,n[e].argCount=t)},xr=(e,r,t)=>{var o=n["dynCall_"+e];return t&&t.length?o.apply(null,[r].concat(t)):o.call(null,r)},Mr=[],Ur=e=>{var r=Mr[e];return r||(e>=Mr.length&&(Mr.length=e+1),Mr[e]=r=Or.get(e)),r},Br=(e,r,t)=>e.includes("j")?xr(e,r,t):Ur(r).apply(null,t),jr=(e,r)=>{var t=[];return function(){return t.length=0,Object.assign(t,arguments),Br(e,r,t)}},Ir=(e,r)=>{var t=(e=Be(e)).includes("j")?jr(e,r):Ur(r);return"function"!=typeof t&&Ne(`unknown function pointer with signature ${e}: ${r}`),t},zr=(e,r)=>{var t=wr(r,(function(e){this.name=r,this.message=e;var t=new Error(e).stack;void 0!==t&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},t},Nr=e=>{var r=uo(e),t=Be(r);return ao(r),t},Hr=(e,r)=>{var t=[],o={};throw r.forEach((function e(r){o[r]||Ie[r]||(ze[r]?ze[r].forEach(e):(t.push(r),o[r]=!0))})),new Wr(`${e}: `+t.map(Nr).join([", "]))},Vr=(e,r,t,o,n,s,a,i,u,l,d,c,f)=>{d=Be(d),s=Ir(n,s),i&&(i=Ir(a,i)),l&&(l=Ir(u,l)),f=Ir(c,f);var h=Cr(d);Er(h,(function(){Hr(`Cannot construct ${d} due to unbound types`,[o])})),Ve([e,r,t],o?[o]:[],(function(r){var t,n;r=r[0],n=o?(t=r.registeredClass).instancePrototype:vr.prototype;var a=wr(d,(function(){if(Object.getPrototypeOf(this)!==u)throw new Le("Use 'new' to construct "+d);if(void 0===c.constructor_body)throw new Le(d+" has no accessible constructor");var e=c.constructor_body[arguments.length];if(void 0===e)throw new Le(`Tried to invoke ctor of ${d} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(c.constructor_body).toString()}) parameters instead!`);return e.apply(this,arguments)})),u=Object.create(n,{constructor:{value:a}});a.prototype=u;var c=new Dr(d,a,u,f,t,s,i,l);c.baseClass&&(void 0===c.baseClass.__derivedClasses&&(c.baseClass.__derivedClasses=[]),c.baseClass.__derivedClasses.push(c));var p=new Rr(d,c,!0,!1,!1),m=new Rr(d+"*",c,!1,!1,!1),g=new Rr(d+" const*",c,!1,!0,!1);return nr[e]={pointerType:m,constPointerType:g},Lr(h,a),[p,m,g]}))},qr=(e,r)=>{for(var t=[],o=0;o<e;o++)t.push(_[r+4*o>>2]);return t},Gr=e=>{for(;e.length;){var r=e.pop();e.pop()(r)}};function Jr(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var t=wr(e.name||"unknownFunctionName",(function(){}));t.prototype=e.prototype;var o=new t,n=e.apply(o,r);return n instanceof Object?n:o}function Xr(e,r,t,o,n,s){var a=r.length;a<2&&Ne("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=null!==r[1]&&null!==t,u=!1,l=1;l<r.length;++l)if(null!==r[l]&&void 0===r[l].destructorFunction){u=!0;break}var d="void"!==r[0].name,c="",f="";for(l=0;l<a-2;++l)c+=(0!==l?", ":"")+"arg"+l,f+=(0!==l?", ":"")+"arg"+l+"Wired";var h=`\n        return function (${c}) {\n        if (arguments.length !== ${a-2}) {\n          throwBindingError('function ${e} called with ' + arguments.length + ' arguments, expected ${a-2}');\n        }`;u&&(h+="var destructors = [];\n");var p=u?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],g=[Ne,o,n,Gr,r[0],r[1]];for(i&&(h+="var thisWired = classParam.toWireType("+p+", this);\n"),l=0;l<a-2;++l)h+="var arg"+l+"Wired = argType"+l+".toWireType("+p+", arg"+l+"); // "+r[l+2].name+"\n",m.push("argType"+l),g.push(r[l+2]);if(i&&(f="thisWired"+(f.length>0?", ":"")+f),h+=(d||s?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",u)h+="runDestructors(destructors);\n";else for(l=i?1:2;l<r.length;++l){var y=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==r[l].destructorFunction&&(h+=y+"_dtor("+y+"); // "+r[l].name+"\n",m.push(y+"_dtor"),g.push(r[l].destructorFunction))}d&&(h+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),h+="}\n",m.push(h);var v=Jr(Function,m).apply(null,g);return wr(e,v)}var Kr=(e,r,t,o,n,s)=>{var a=qr(r,t);n=Ir(o,n),Ve([],[e],(function(e){var t=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[r-1])throw new Le(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[r-1]=()=>{Hr(`Cannot construct ${e.name} due to unbound types`,a)},Ve([],a,(o=>(o.splice(1,0,null),e.registeredClass.constructor_body[r-1]=Xr(t,o,null,n,s),[]))),[]}))},Zr=e=>{const r=(e=e.trim()).indexOf("(");return-1!==r?e.substr(0,r):e},Qr=(e,r,t,o,n,s,a,i,u)=>{var l=qr(t,o);r=Be(r),r=Zr(r),s=Ir(n,s),Ve([],[e],(function(e){var o=`${(e=e[0]).name}.${r}`;function n(){Hr(`Cannot call ${o} due to unbound types`,l)}r.startsWith("@@")&&(r=Symbol[r.substring(2)]),i&&e.registeredClass.pureVirtualFunctions.push(r);var d=e.registeredClass.instancePrototype,c=d[r];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===t-2?(n.argCount=t-2,n.className=e.name,d[r]=n):(br(d,r,o),d[r].overloadTable[t-2]=n),Ve([],l,(function(n){var i=Xr(o,n,e,s,a,u);return void 0===d[r].overloadTable?(i.argCount=t-2,d[r]=i):d[r].overloadTable[t-2]=i,[]})),[]}))};function Yr(){Object.assign(et.prototype,{get(e){return this.allocated[e]},has(e){return void 0!==this.allocated[e]},allocate(e){var r=this.freelist.pop()||this.allocated.length;return this.allocated[r]=e,r},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function et(){this.allocated=[void 0],this.freelist=[]}var rt=new et,tt=e=>{e>=rt.reserved&&0==--rt.get(e).refcount&&rt.free(e)},ot=()=>{for(var e=0,r=rt.reserved;r<rt.allocated.length;++r)void 0!==rt.allocated[r]&&++e;return e},nt=()=>{rt.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),rt.reserved=rt.allocated.length,n.count_emval_handles=ot},st={toValue:e=>(e||Ne("Cannot use deleted val. handle = "+e),rt.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return rt.allocate({refcount:1,value:e})}}};function at(e){return this.fromWireType(A[e>>2])}var it=(e,r)=>{Ge(e,{name:r=Be(r),fromWireType:e=>{var r=st.toValue(e);return tt(e),r},toWireType:(e,r)=>st.toHandle(r),argPackAdvance:Xe,readValueFromPointer:at,destructorFunction:null})},ut=e=>{if(null===e)return"null";var r=typeof e;return"object"===r||"array"===r||"function"===r?e.toString():""+e},lt=(e,r)=>{switch(r){case 4:return function(e){return this.fromWireType(T[e>>2])};case 8:return function(e){return this.fromWireType(F[e>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},dt=(e,r,t)=>{Ge(e,{name:r=Be(r),fromWireType:e=>e,toWireType:(e,r)=>r,argPackAdvance:Xe,readValueFromPointer:lt(r,t),destructorFunction:null})},ct=(e,r,t)=>{switch(r){case 1:return t?e=>S[e>>0]:e=>k[e>>0];case 2:return t?e=>C[e>>1]:e=>D[e>>1];case 4:return t?e=>A[e>>2]:e=>_[e>>2];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},ft=(e,r,t,o,n)=>{r=Be(r);var s=e=>e;if(0===o){var a=32-8*t;s=e=>e<<a>>>a}var i=r.includes("unsigned");Ge(e,{name:r,fromWireType:s,toWireType:i?function(e,r){return this.name,r>>>0}:function(e,r){return this.name,r},argPackAdvance:Xe,readValueFromPointer:ct(r,t,0!==o),destructorFunction:null})},ht=(e,r,t)=>{var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][r];function n(e){var r=_[e>>2],t=_[e+4>>2];return new o(S.buffer,t,r)}Ge(e,{name:t=Be(t),fromWireType:n,argPackAdvance:Xe,readValueFromPointer:n},{ignoreDuplicateRegistrations:!0})},pt=(e,r,t)=>ge(e,k,r,t),mt=(e,r)=>{var t="std::string"===(r=Be(r));Ge(e,{name:r,fromWireType(e){var r,o=_[e>>2],n=e+4;if(t)for(var s=n,a=0;a<=o;++a){var i=n+a;if(a==o||0==k[i]){var u=Pe(s,i-s);void 0===r?r=u:(r+=String.fromCharCode(0),r+=u),s=i+1}}else{var l=new Array(o);for(a=0;a<o;++a)l[a]=String.fromCharCode(k[n+a]);r=l.join("")}return ao(e),r},toWireType(e,r){var o;r instanceof ArrayBuffer&&(r=new Uint8Array(r));var n="string"==typeof r;n||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||Ne("Cannot pass non-string to std::string"),o=t&&n?me(r):r.length;var s=lo(4+o+1),a=s+4;if(_[s>>2]=o,t&&n)pt(r,a,o+1);else if(n)for(var i=0;i<o;++i){var u=r.charCodeAt(i);u>255&&(ao(a),Ne("String has UTF-16 code units that do not fit in 8 bits")),k[a+i]=u}else for(i=0;i<o;++i)k[a+i]=r[i];return null!==e&&e.push(ao,s),s},argPackAdvance:Xe,readValueFromPointer:Pr,destructorFunction(e){ao(e)}})},gt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,yt=(e,r)=>{for(var t=e,o=t>>1,n=o+r/2;!(o>=n)&&D[o];)++o;if((t=o<<1)-e>32&&gt)return gt.decode(k.subarray(e,t));for(var s="",a=0;!(a>=r/2);++a){var i=C[e+2*a>>1];if(0==i)break;s+=String.fromCharCode(i)}return s},vt=(e,r,t)=>{if(void 0===t&&(t=2147483647),t<2)return 0;for(var o=r,n=(t-=2)<2*e.length?t/2:e.length,s=0;s<n;++s){var a=e.charCodeAt(s);C[r>>1]=a,r+=2}return C[r>>1]=0,r-o},wt=e=>2*e.length,bt=(e,r)=>{for(var t=0,o="";!(t>=r/4);){var n=A[e+4*t>>2];if(0==n)break;if(++t,n>=65536){var s=n-65536;o+=String.fromCharCode(55296|s>>10,56320|1023&s)}else o+=String.fromCharCode(n)}return o},Et=(e,r,t)=>{if(void 0===t&&(t=2147483647),t<4)return 0;for(var o=r,n=o+t-4,s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s)),A[r>>2]=a,(r+=4)+4>n)break}return A[r>>2]=0,r-o},St=e=>{for(var r=0,t=0;t<e.length;++t){var o=e.charCodeAt(t);o>=55296&&o<=57343&&++t,r+=4}return r},kt=(e,r,t)=>{var o,n,s,a,i;t=Be(t),2===r?(o=yt,n=vt,a=wt,s=()=>D,i=1):4===r&&(o=bt,n=Et,a=St,s=()=>_,i=2),Ge(e,{name:t,fromWireType:e=>{for(var t,n=_[e>>2],a=s(),u=e+4,l=0;l<=n;++l){var d=e+4+l*r;if(l==n||0==a[d>>i]){var c=o(u,d-u);void 0===t?t=c:(t+=String.fromCharCode(0),t+=c),u=d+r}}return ao(e),t},toWireType:(e,o)=>{"string"!=typeof o&&Ne(`Cannot pass non-string to C++ string type ${t}`);var s=a(o),u=lo(4+s+r);return _[u>>2]=s>>i,n(o,u+4,s+r),null!==e&&e.push(ao,u),u},argPackAdvance:Xe,readValueFromPointer:at,destructorFunction(e){ao(e)}})},Ct=(e,r)=>{Ge(e,{isVoid:!0,name:r=Be(r),argPackAdvance:0,fromWireType:()=>{},toWireType:(e,r)=>{}})},Dt={},At=e=>{var r=Dt[e];return void 0===r?Be(e):r},_t=[],Tt=(e,r,t,o,n)=>(e=_t[e])(r=st.toValue(r),r[t=At(t)],o,n),Ft=e=>{var r=_t.length;return _t.push(e),r},Pt=(e,r)=>{var t=Ie[e];return void 0===t&&Ne(r+" has unknown type "+Nr(e)),t},$t=(e,r)=>{for(var t=new Array(e),o=0;o<e;++o)t[o]=Pt(_[r+4*o>>2],"parameter "+o);return t},Rt=(e,r,t)=>{var o=[],n=e.toWireType(o,t);return o.length&&(_[r>>2]=st.toHandle(o)),n},Ot=(e,r,t)=>{var o=$t(e,r),n=o.shift();e--;var s="return function (obj, func, destructorsRef, args) {\n",a=0,i=[];0===t&&i.push("obj");for(var u=["retType"],l=[n],d=0;d<e;++d)i.push("arg"+d),u.push("argType"+d),l.push(o[d]),s+=`  var arg${d} = argType${d}.readValueFromPointer(args${a?"+"+a:""});\n`,a+=o[d].argPackAdvance;for(s+=`  var rv = ${1===t?"new func":"func.call"}(${i.join(", ")});\n`,d=0;d<e;++d)o[d].deleteObject&&(s+=`  argType${d}.deleteObject(arg${d});\n`);n.isVoid||(u.push("emval_returnValue"),l.push(Rt),s+="  return emval_returnValue(retType, destructorsRef, rv);\n"),s+="};\n",u.push(s);var c=Jr(Function,u).apply(null,l),f=`methodCaller<(${o.map((e=>e.name)).join(", ")}) => ${n.name}>`;return Ft(wr(f,c))},Wt=e=>{var r=st.toValue(e);Gr(r),tt(e)},Lt=(e,r)=>r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,xt=()=>{q("")},Mt=()=>Date.now(),Ut=(e,r,t)=>k.copyWithin(e,r,r+t),Bt=e=>{q("OOM")},jt=e=>{k.length,Bt()},It={},zt=()=>l||"./this.program",Nt=()=>{if(!Nt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:zt()};for(var r in It)void 0===It[r]?delete e[r]:e[r]=It[r];var t=[];for(var r in e)t.push(`${r}=${e[r]}`);Nt.strings=t}return Nt.strings},Ht=(e,r)=>{for(var t=0;t<e.length;++t)S[r++>>0]=e.charCodeAt(t);S[r>>0]=0},Vt=(e,r)=>{var t=0;return Nt().forEach(((o,n)=>{var s=r+t;_[e+4*n>>2]=s,Ht(o,s),t+=o.length+1})),0},qt=(e,r)=>{var t=Nt();_[e>>2]=t.length;var o=0;return t.forEach((e=>o+=e.length+1)),_[r>>2]=o,0};function Gt(e){try{var r=$e.getStreamFromFD(e);return Fe.close(r),0}catch(e){if(void 0===Fe||"ErrnoError"!==e.name)throw e;return e.errno}}function Jt(e,r){try{var t=$e.getStreamFromFD(e),o=t.tty?2:Fe.isDir(t.mode)?3:Fe.isLink(t.mode)?7:4;return S[r>>0]=o,C[r+2>>1]=0,X=[0,(J=0,+Math.abs(J)>=1?J>0?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],A[r+8>>2]=X[0],A[r+12>>2]=X[1],X=[0,(J=0,+Math.abs(J)>=1?J>0?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],A[r+16>>2]=X[0],A[r+20>>2]=X[1],0}catch(e){if(void 0===Fe||"ErrnoError"!==e.name)throw e;return e.errno}}var Xt=(e,r,t,o)=>{for(var n=0,s=0;s<t;s++){var a=_[r>>2],i=_[r+4>>2];r+=8;var u=Fe.read(e,S,a,i,o);if(u<0)return-1;if(n+=u,u<i)break;void 0!==o&&(o+=u)}return n};function Kt(e,r,t,o){try{var n=$e.getStreamFromFD(e),s=Xt(n,r,t);return _[o>>2]=s,0}catch(e){if(void 0===Fe||"ErrnoError"!==e.name)throw e;return e.errno}}function Zt(e,r,t,o,n){var s=Lt(r,t);try{if(isNaN(s))return 61;var a=$e.getStreamFromFD(e);return Fe.llseek(a,s,o),X=[a.position>>>0,(J=a.position,+Math.abs(J)>=1?J>0?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],A[n>>2]=X[0],A[n+4>>2]=X[1],a.getdents&&0===s&&0===o&&(a.getdents=null),0}catch(e){if(void 0===Fe||"ErrnoError"!==e.name)throw e;return e.errno}}var Qt=(e,r,t,o)=>{for(var n=0,s=0;s<t;s++){var a=_[r>>2],i=_[r+4>>2];r+=8;var u=Fe.write(e,S,a,i,o);if(u<0)return-1;n+=u,void 0!==o&&(o+=u)}return n};function Yt(e,r,t,o){try{var n=$e.getStreamFromFD(e),s=Qt(n,r,t);return _[o>>2]=s,0}catch(e){if(void 0===Fe||"ErrnoError"!==e.name)throw e;return e.errno}}var eo=function(e,r,t,o){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Fe.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=o},ro=365,to=146;Object.defineProperties(eo.prototype,{read:{get:function(){return(this.mode&ro)===ro},set:function(e){e?this.mode|=ro:this.mode&=~ro}},write:{get:function(){return(this.mode&to)===to},set:function(e){e?this.mode|=to:this.mode&=~to}},isFolder:{get:function(){return Fe.isDir(this.mode)}},isDevice:{get:function(){return Fe.isChrdev(this.mode)}}}),Fe.FSNode=eo,Fe.createPreloadedFile=Ae,Fe.staticInit(),Ue(),Le=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},xe=n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},yr(),dr(),$r(),Wr=n.UnboundTypeError=zr(Error,"UnboundTypeError"),Yr(),nt();var oo,no={o:ae,A:Re,s:Oe,q:Me,C:Ke,D:Vr,y:Kr,h:Qr,B:it,l:dt,c:ft,b:ht,m:mt,j:kt,n:Ct,f:Tt,g:tt,e:Ot,d:Wt,a:xt,i:Mt,w:Ut,r:jt,u:Vt,v:qt,k:Gt,t:Jt,z:Kt,p:Zt,x:Yt},so=oe(),ao=e=>(ao=so.G)(e),io=()=>(io=so.I)(),uo=e=>(uo=so.J)(e),lo=e=>(lo=so.K)(e),co=e=>(co=so.M)(e);function fo(){function e(){oo||(oo=!0,n.calledRun=!0,P||(M(),t(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),U()))}z>0||(x(),z>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e()))}if(n.dynCall_viiijj=(e,r,t,o,s,a,i,u)=>(n.dynCall_viiijj=so.N)(e,r,t,o,s,a,i,u),n.dynCall_jij=(e,r,t,o)=>(n.dynCall_jij=so.O)(e,r,t,o),n.dynCall_jii=(e,r,t)=>(n.dynCall_jii=so.P)(e,r,t),n.dynCall_jiji=(e,r,t,o,s)=>(n.dynCall_jiji=so.Q)(e,r,t,o,s),N=function e(){oo||fo(),oo||(N=e)},n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return fo(),e.ready});const o=1,n=2,s="fetch",a="websocket",i="debug",u="warn",l={playType:"player",videoBuffer:1e3,videoBufferDelay:1e3,networkDelay:1e4,isResize:!0,isFullResize:!1,isFlv:!1,isHls:!1,isFmp4:!1,isFmp4Private:!1,isWebrtc:!1,isWebrtcForZLM:!1,isWebrtcForSRS:!1,isWebrtcForOthers:!1,isNakedFlow:!1,isMpeg4:!1,isAliyunRtc:!1,isTs:!1,debug:!1,debugLevel:u,debugUuid:"",isMulti:!0,multiIndex:-1,hotKey:!1,loadingTimeout:10,heartTimeout:10,timeout:10,pageVisibilityHiddenTimeout:300,loadingTimeoutReplay:!0,heartTimeoutReplay:!0,loadingTimeoutReplayTimes:3,heartTimeoutReplayTimes:3,heartTimeoutReplayUseLastFrameShow:!0,replayUseLastFrameShow:!0,replayShowLoadingIcon:!1,supportDblclickFullscreen:!1,showBandwidth:!1,showPerformance:!1,mseCorrectTimeDuration:20,mseCorrectAudioTimeDuration:20,keepScreenOn:!0,isNotMute:!1,muted:!0,hasAudio:!0,hasVideo:!0,operateBtns:{fullscreen:!1,screenshot:!1,play:!1,audio:!1,record:!1,ptz:!1,quality:!1,zoom:!1,close:!1,scale:!1,performance:!1,logSave:!1,aiFace:!1,aiObject:!1,aiOcclusion:!1,fullscreenFn:null,fullscreenExitFn:null,screenshotFn:null,playFn:null,pauseFn:null,recordFn:null,recordStopFn:null},extendOperateBtns:[],contextmenuBtns:[],watermarkConfig:{},controlAutoHide:!1,controlAutoHideDelayTime:5,hasControl:!1,loadingIcon:!0,loadingIconStyle:{},loadingText:"",background:"",poster:"",backgroundLoadingShow:!0,loadingBackground:"",loadingBackgroundWidth:0,loadingBackgroundHeight:0,decoder:"decoder-pro.js",decoderAudio:"decoder-pro-audio.js",decoderHard:"decoder-pro-hard.js",decoderHardNotWasm:"decoder-pro-hard-not-wasm.js",wasmMp4RecorderDecoder:"jessibuca-pro-mp4-recorder-decoder.js",decoderWASM:"",isDecoderUseCDN:!1,url:"",rotate:0,mirrorRotate:"none",aspectRatio:"default",playbackConfig:{playList:[],fps:"",showControl:!0,controlType:"normal",duration:0,startTime:"",showRateBtn:!1,rateConfig:[],showPrecision:"",showPrecisionBtn:!0,isCacheBeforeDecodeForFpsRender:!1,uiUsePlaybackPause:!1,isPlaybackPauseClearCache:!0,isUseFpsRender:!1,isUseLocalCalculateTime:!1,localOneFrameTimestamp:40,supportWheel:!1,useWCS:!1,useMSE:!1},qualityConfig:[],defaultStreamQuality:"",scaleConfig:["拉伸","缩放","正常"],forceNoOffscreen:!0,hiddenAutoPause:!1,protocol:n,demuxType:"flv",useWasm:!1,useMSE:!1,useWCS:!1,useSIMD:!0,useMThreading:!1,wcsUseVideoRender:!0,wcsUseWebgl2Render:!1,wasmUseVideoRender:!0,mseUseCanvasRender:!1,hlsUseCanvasRender:!1,webrtcUseCanvasRender:!1,useOffscreen:!1,useWebGPU:!1,mseDecodeErrorReplay:!0,wcsDecodeErrorReplay:!0,wasmDecodeErrorReplay:!0,simdDecodeErrorReplay:!0,simdDecodeErrorReplayType:"wasm",autoWasm:!0,decoderErrorAutoWasm:!1,hardDecodingNotSupportAutoWasm:!0,webglAlignmentErrorReplay:!0,webglContextLostErrorReplay:!0,openWebglAlignment:!1,syncAudioAndVideo:!0,syncAudioAndVideoDiff:400,playbackDelayTime:1e3,playbackFps:25,playbackForwardMaxRateDecodeIFrame:4,playbackCurrentTimeMove:!0,useVideoRender:!0,useCanvasRender:!1,videoRenderType:"",networkDelayTimeoutReplay:!1,recordType:"mp4",checkFirstIFrame:!0,nakedFlowFps:25,audioEngine:null,isShowRecordingUI:!0,isShowZoomingUI:!0,useFaceDetector:!1,useObjectDetector:!1,useImageDetector:!1,useOcclusionDetector:!1,ptzPositionConfig:{},ptzShowType:"vertical",ptzClickType:"click",ptzStopEmitDelay:.3,ptzZoomShow:!1,ptzApertureShow:!1,ptzFocusShow:!1,ptzMoreArrowShow:!1,ptzCruiseShow:!1,ptzFogShow:!1,ptzWiperShow:!1,ptzSupportDraggable:!1,weiXinInAndroidAudioBufferSize:4800,isCryptoAudio:!1,isM7sCrypto:!1,isSm4Crypto:!1,isSm4CryptoH265V2:!1,isXorCrypto:!1,sm4CryptoKey:"",m7sCryptoKey:"",xorCryptoKey:"",cryptoKey:"",cryptoIV:"",cryptoKeyUrl:"",listenWindowResizeAuoResize:!0,orientationChangeResize:!1,useWebFullScreen:!1,ptsMaxDiff:3600,aiFaceDetectLevel:2,aiFaceDetectWidth:240,aiFaceDetectShowRect:!0,aiFaceDetectInterval:1e3,aiFaceDetectRectConfig:{},aiObjectDetectLevel:2,aiObjectDetectWidth:240,aiObjectDetectShowRect:!0,aiObjectDetectInterval:1e3,aiObjectDetectRectConfig:{},aiOcclusionDetectInterval:1e3,aiImageDetectDrop:!1,aiImageDetectActive:!1,videoRenderSupportScale:!0,mediaSourceTsIsMaxDiffReplay:!0,controlHtml:"",isH265:!1,isWebrtcH265:!1,supportLockScreenPlayAudio:!0,supportHls265:!0,isEmitSEI:!1,pauseAndNextPlayUseLastFrameShow:!1,demuxUseWorker:!0,playFailedAndReplay:!0,showMessageConfig:{playIsNotPauseOrUrlIsNull:"播放地址不能为空",webglAlignmentError:"Webgl 渲染失败",webglContextLostError:"webgl 上下文丢失",mediaSourceH265NotSupport:"不支持硬解码H265",mseSourceBufferFull:"缓冲区已满",mediaSourceAppendBufferError:"初始化解码器失败",mseSourceBufferError:"解码失败",mseAddSourceBufferError:"初始化解码器失败",mseWorkerAddSourceBufferError:"初始化解码器失败",mediaSourceDecoderConfigurationError:"初始化解码器失败",mediaSourceTsIsMaxDiff:"流异常",mseWidthOrHeightChange:"流异常",mediaSourceAudioG711NotSupport:"硬解码不支持G711a/u音频格式",mediaSourceAudioInitTimeout:"初始化音频解码器失败",mediaSourceAudioNoDataTimeout:"等待音频数据超时",mediaSourceUseCanvasRenderPlayFailed:"MediaSource解码使用canvas渲染失败",mediaSourceBufferedIsZeroError:"流异常",webcodecsH265NotSupport:"不支持硬解码H265",webcodecsUnsupportedConfigurationError:"初始化解码器失败",webcodecsDecodeConfigureError:"初始化解码器失败",webcodecsDecodeError:"解码失败",webcodecsAudioInitTimeout:"初始化音频解码器失败",webcodecsAudioNoDataTimeout:"等待音频数据超时",wcsWidthOrHeightChange:"解码失败",wasmDecodeError:"解码失败",simdDecodeError:"解码失败",wasmWidthOrHeightChange:"流异常",wasmUseVideoRenderError:"video自动渲染失败",videoElementPlayingFailed:"video自动渲染失败",simdH264DecodeVideoWidthIsTooLarge:"不支持该分辨率的视频",networkDelayTimeout:"网络超时重播失败",fetchError:"请求失败",streamEnd:"请求结束",websocket1006Error:"流异常结束",websocketError:"请求失败",webrtcError:"请求失败",hlsError:"请求失败",decoderWorkerInitError:"初始化worker失败",decoderWorkerWasmError:"wasm解码失败",videoElementPlayingFailedForWebrtc:"video自动渲染失败",videoInfoError:"解析视频分辨率失败",webrtcStreamH265:"webrtc不支持H265",delayTimeout:"播放超时重播失败",loadingTimeout:"加载超时重播失败",loadingTimeoutRetryEnd:"加载超时重播失败",delayTimeoutRetryEnd:"播放超时重播失败",flvDemuxBufferSizeTooLarge:"FLV待解封装buffer过大",audioChannelError:"音频通道错误",aliyunRtcError:"请求失败",mseWaitVideoCanplayTimeout:"流异常",initDecoderWorkerTimeout:"初始化解码worker超时"},videoElementPlayingFailedReplay:!0,mp4RecordUseWasm:!0,mseAutoCleanupSourceBuffer:!0,mseAutoCleanupMaxBackwardDuration:30,mseAutoCleanupMinBackwardDuration:10,widthOrHeightChangeReplay:!0,simdH264DecodeVideoWidthIsTooLargeReplay:!0,mediaSourceAudioG711NotSupportReplay:!0,mediaSourceAudioInitTimeoutReplay:!0,mediaSourceAudioNoDataTimeoutReplay:!0,mediaSourceUseCanvasRenderPlayFailedReplay:!0,mediaSourceUseCanvasRenderPlayFailedReplayType:"video",webcodecsAudioInitTimeoutReplay:!0,webcodecsAudioNoDataTimeoutReplay:!0,widthOrHeightChangeReplayDelayTime:0,ghostWatermarkConfig:{on:5,off:5,content:"",fontSize:12,color:"white",opacity:.15,speed:.2},dynamicWatermarkConfig:{content:"",speed:.2,fontSize:12,color:"white",opacity:.15},isDropSameTimestampGop:!1,mseDecodeAudio:!0,wcsDecodeAudio:!0,nakedFlowH265DemuxUseNew:!0,nakedFlowDemuxUseNew:!0,extendDomConfig:{html:"",showBeforePlay:!1,showAfterLoading:!0},disableContextmenu:!1,mseDecoderUseWorker:!0,openMemoryLog:!1,mainThreadFetchUseWorker:!0,playFailedAndPausedShowPlayBtn:!0,mseCorrectionTimestamp:!0,flvDemuxBufferSizeTooLargeReplay:!1,flvDemuxBufferSizeTooLargeEmitFailed:!1,flvDemuxBufferSizeMaxLarge:1048576,isCheckInView:!1,hiddenControl:!1,androidMobileFullscreenRotate:!0,disableModule:{ptz:!1,record:!1,zoom:!1,watermark:!1,playback:!1},recordWebMSupportSeek:!1,wasmPlayAudioUseVideoRender:!1,mseWaitVideoCanplayTimeout:6,mseWaitVideoCanplayAutoWasm:!0,zoomMaxScale:5,useOldWasm:!1,zoomSupportGestureInMobile:!1,zoomSupportGestureInMobileSpeed:.2,drawingRectColor:"red",drawingRectLineWidth:1,drawingRectEndRemoveDom:!0,videoSEISyncPtsDiff:.2},d="init",c="playAudio",f="initAudio",h="audioCode",p="workerFetch",m="workerEnd",g="closeEnd",y=1,v=8,w="init",b="close",E="updateConfig",S="fetchStream",k="sendWsMessage",C="streamEnd",D="streamRate",A="streamAbps",_="streamSuccess",T="websocketOpen",F={playError:"playIsNotPauseOrUrlIsNull",fetchError:"fetchError",websocketError:"websocketError",webcodecsH265NotSupport:"webcodecsH265NotSupport",webcodecsDecodeError:"webcodecsDecodeError",webcodecsUnsupportedConfigurationError:"webcodecsUnsupportedConfigurationError",webcodecsDecodeConfigureError:"webcodecsDecodeConfigureError",webcodecsAudioInitTimeout:"webcodecsAudioInitTimeout",webcodecsAudioNoDataTimeout:"webcodecsAudioNoDataTimeout",mediaSourceH265NotSupport:"mediaSourceH265NotSupport",mediaSourceAudioG711NotSupport:"mediaSourceAudioG711NotSupport",mediaSourceAudioInitTimeout:"mediaSourceAudioInitTimeout",mediaSourceAudioNoDataTimeout:"mediaSourceAudioNoDataTimeout",mediaSourceDecoderConfigurationError:"mediaSourceDecoderConfigurationError",mediaSourceFull:"mseSourceBufferFull",mseSourceBufferError:"mseSourceBufferError",mseAddSourceBufferError:"mseAddSourceBufferError",mseWorkerAddSourceBufferError:"mseWorkerAddSourceBufferError",mediaSourceAppendBufferError:"mediaSourceAppendBufferError",mediaSourceTsIsMaxDiff:"mediaSourceTsIsMaxDiff",mediaSourceUseCanvasRenderPlayFailed:"mediaSourceUseCanvasRenderPlayFailed",mediaSourceBufferedIsZeroError:"mediaSourceBufferedIsZeroError",wasmDecodeError:"wasmDecodeError",wasmUseVideoRenderError:"wasmUseVideoRenderError",simdH264DecodeVideoWidthIsTooLarge:"simdH264DecodeVideoWidthIsTooLarge",simdDecodeError:"simdDecodeError",hlsError:"hlsError",webrtcError:"webrtcError",webrtcClosed:"webrtcClosed",webrtcIceCandidateError:"webrtcIceCandidateError",webglAlignmentError:"webglAlignmentError",wasmWidthOrHeightChange:"wasmWidthOrHeightChange",mseWidthOrHeightChange:"mseWidthOrHeightChange",wcsWidthOrHeightChange:"wcsWidthOrHeightChange",widthOrHeightChange:"widthOrHeightChange",tallWebsocketClosedByError:"tallWebsocketClosedByError",flvDemuxBufferSizeTooLarge:"flvDemuxBufferSizeTooLarge",audioChannelError:"audioChannelError",webglContextLostError:"webglContextLostError",videoElementPlayingFailed:"videoElementPlayingFailed",videoElementPlayingFailedForWebrtc:"videoElementPlayingFailedForWebrtc",decoderWorkerInitError:"decoderWorkerInitError",decoderWorkerWasmError:"decoderWorkerWasmError",videoInfoError:"videoInfoError",streamEnd:C,websocket1006Error:"websocket1006Error",delayTimeout:"delayTimeout",loadingTimeout:"loadingTimeout",networkDelayTimeout:"networkDelayTimeout",fullscreenError:"fullscreenError",aliyunRtcError:"aliyunRtcError",mseWaitVideoCanplayTimeout:"mseWaitVideoCanplayTimeout",initDecoderWorkerTimeout:"initDecoderWorkerTimeout",...{talkStreamError:"talkStreamError",talkStreamClose:"talkStreamClose"}},P=1,$=10,R=7,O=8,W=2,L="AbortError",x=0,M="idle",U="buffering",B="complete";var j,I,z=(j=function(e){!function(){var r="undefined"!=typeof window&&void 0!==window.document?window.document:{},t=e.exports,o=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,n=t.length,s={};o<n;o++)if((e=t[o])&&e[1]in r){for(o=0;o<e.length;o++)s[t[0][o]]=e[o];return s}return!1}(),n={change:o.fullscreenchange,error:o.fullscreenerror},s={request:function(e,t){return new Promise(function(n,s){var a=function(){this.off("change",a),n()}.bind(this);this.on("change",a);var i=(e=e||r.documentElement)[o.requestFullscreen](t);i instanceof Promise&&i.then(a).catch(s)}.bind(this))},exit:function(){return new Promise(function(e,t){if(this.isFullscreen){var n=function(){this.off("change",n),e()}.bind(this);this.on("change",n);var s=r[o.exitFullscreen]();s instanceof Promise&&s.then(n).catch(t)}else e()}.bind(this))},toggle:function(e,r){return this.isFullscreen?this.exit():this.request(e,r)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var o=n[e];o&&r.addEventListener(o,t,!1)},off:function(e,t){var o=n[e];o&&r.removeEventListener(o,t,!1)},raw:o};o?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(r[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return r[o.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(r[o.fullscreenEnabled])}}}),t?e.exports=s:window.screenfull=s):t?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},j(I={exports:{}},I.exports),I.exports);function N(e){return function(e){return e[0]>>4===$}(e)&&e[1]===x}function H(){return performance&&"function"==typeof performance.now?performance.now():Date.now()}function V(e){let r=0,t=H();return o=>{if(n=o,"[object Number]"!==Object.prototype.toString.call(n))return;var n;r+=o;const s=H(),a=s-t;a>=1e3&&(e(r/a*1e3),t=s,r=0)}}z.isEnabled,(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}})();function q(){return"undefined"!=typeof WritableStream}function G(e){return e.ok&&e.status>=200&&e.status<=299}function J(){return function(e){let r="";if("object"==typeof e)try{r=JSON.stringify(e),r=JSON.parse(r)}catch(t){r=e}else r=e;return r}(l)}function X(e){return!0===e||"true"===e}function K(e){return!0!==e&&"true"!==e}var Z=function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function a(e){try{u(o.next(e))}catch(e){s(e)}}function i(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((o=o.apply(e,r||[])).next())}))};const Q=Symbol(32),Y=Symbol(16),ee=Symbol(8);class re{constructor(e){this.g=e,this.consumed=0,e&&(this.need=e.next().value)}setG(e){this.g=e,this.demand(e.next().value,!0)}consume(){this.buffer&&this.consumed&&(this.buffer.copyWithin(0,this.consumed),this.buffer=this.buffer.subarray(0,this.buffer.length-this.consumed),this.consumed=0)}demand(e,r){return r&&this.consume(),this.need=e,this.flush()}read(e){return Z(this,void 0,void 0,(function*(){return this.lastReadPromise&&(yield this.lastReadPromise),this.lastReadPromise=new Promise(((r,t)=>{var o;this.reject=t,this.resolve=e=>{delete this.lastReadPromise,delete this.resolve,delete this.need,r(e)};this.demand(e,!0)||null===(o=this.pull)||void 0===o||o.call(this,e)}))}))}readU32(){return this.read(Q)}readU16(){return this.read(Y)}readU8(){return this.read(ee)}close(){var e;this.g&&this.g.return(),this.buffer&&this.buffer.subarray(0,0),null===(e=this.reject)||void 0===e||e.call(this,new Error("EOF")),delete this.lastReadPromise}flush(){if(!this.buffer||!this.need)return;let e=null;const r=this.buffer.subarray(this.consumed);let t=0;const o=e=>r.length<(t=e);if("number"==typeof this.need){if(o(this.need))return;e=r.subarray(0,t)}else if(this.need===Q){if(o(4))return;e=r[0]<<24|r[1]<<16|r[2]<<8|r[3]}else if(this.need===Y){if(o(2))return;e=r[0]<<8|r[1]}else if(this.need===ee){if(o(1))return;e=r[0]}else if("buffer"in this.need){if("byteOffset"in this.need){if(o(this.need.byteLength-this.need.byteOffset))return;new Uint8Array(this.need.buffer,this.need.byteOffset).set(r.subarray(0,t)),e=this.need}else if(this.g)return void this.g.throw(new Error("Unsupported type"))}else{if(o(this.need.byteLength))return;new Uint8Array(this.need).set(r.subarray(0,t)),e=this.need}return this.consumed+=t,this.g?this.demand(this.g.next(e).value,!0):this.resolve&&this.resolve(e),e}write(e){if(e instanceof Uint8Array?this.malloc(e.length).set(e):"buffer"in e?this.malloc(e.byteLength).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)):this.malloc(e.byteLength).set(new Uint8Array(e)),!this.g&&!this.resolve)return new Promise((e=>this.pull=e));this.flush()}writeU32(e){this.malloc(4).set([e>>24&255,e>>16&255,e>>8&255,255&e]),this.flush()}writeU16(e){this.malloc(2).set([e>>8&255,255&e]),this.flush()}writeU8(e){this.malloc(1)[0]=e,this.flush()}malloc(e){if(this.buffer){const r=this.buffer.length,t=r+e;if(t<=this.buffer.buffer.byteLength-this.buffer.byteOffset)this.buffer=new Uint8Array(this.buffer.buffer,this.buffer.byteOffset,t);else{const e=new Uint8Array(t);e.set(this.buffer),this.buffer=e}return this.buffer.subarray(r,t)}return this.buffer=new Uint8Array(e),this.buffer}}re.U32=Q,re.U16=Y,re.U8=ee;class te{constructor(e){this.log=function(r){if(e._opt.debugLevel==i){const s=e._opt.debugUuid?`[${e._opt.debugUuid}]`:"";for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];console.log(`JbPro${s}[✅✅✅][${r}]`,...o)}},this.warn=function(r){if(e._opt.debugLevel==i||e._opt.debugLevel==u){const s=e._opt.debugUuid?`[${e._opt.debugUuid}]`:"";for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];console.log(`JbPro${s}[❗❗❗][${r}]`,...o)}},this.error=function(r){const t=e._opt.debugUuid?`[${e._opt.debugUuid}]`:"";for(var o=arguments.length,n=new Array(o>1?o-1:0),s=1;s<o;s++)n[s-1]=arguments[s];console.error(`JbPro${t}[❌❌❌][${r}]`,...n)}}}const oe={init:0,findFirstStartCode:1,findSecondStartCode:2};class ne extends class{on(e,r,t){const o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:r,ctx:t}),this}once(e,r,t){const o=this;function n(){o.off(e,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];r.apply(t,a)}return n._=r,this.on(e,n,t)}emit(e){const r=((this.e||(this.e={}))[e]||[]).slice();for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];for(let e=0;e<r.length;e+=1)r[e].fn.apply(r[e].ctx,o);return this}off(e,r){const t=this.e||(this.e={});if(!e)return Object.keys(t).forEach((e=>{delete t[e]})),void delete this.e;const o=t[e],n=[];if(o&&r)for(let e=0,t=o.length;e<t;e+=1)o[e].fn!==r&&o[e].fn._!==r&&n.push(o[e]);return n.length?t[e]=n:delete t[e],this}}{constructor(e){super(),this.player=e,this.isDestroyed=!1,this.reset()}destroy(){this.isDestroyed=!1,this.off(),this.reset()}reset(){this.stats=oe.init,this.tempBuffer=new Uint8Array(0),this.parsedOffset=0,this.versionLayer=0}dispatch(e,r){let t=new Uint8Array(this.tempBuffer.length+e.length);for(t.set(this.tempBuffer,0),t.set(e,this.tempBuffer.length),this.tempBuffer=t;!this.isDestroyed;){if(this.state==oe.Init){let e=!1;for(;this.tempBuffer.length-this.parsedOffset>=2&&!this.isDestroyed;)if(255==this.tempBuffer[this.parsedOffset]){if(!(!1&this.tempBuffer[this.parsedOffset+1])){this.versionLayer=this.tempBuffer[this.parsedOffset+1],this.state=oe.findFirstStartCode,this.fisrtStartCodeOffset=this.parsedOffset,this.parsedOffset+=2,e=!0;break}this.parsedOffset++}else this.parsedOffset++;if(e)continue;break}if(this.state==oe.findFirstStartCode){let e=!1;for(;this.tempBuffer.length-this.parsedOffset>=2&&!this.isDestroyed;)if(255==this.tempBuffer[this.parsedOffset]){if(this.tempBuffer[this.parsedOffset+1]==this.versionLayer){this.state=oe.findSecondStartCode,this.secondStartCodeOffset=this.parsedOffset,this.parsedOffset+=2,e=!0;break}this.parsedOffset++}else this.parsedOffset++;if(e)continue;break}if(this.state==oe.findSecondStartCode){let e=this.tempBuffer.slice(this.fisrtStartCodeOffset,this.secondStartCodeOffset);this.emit("data",e,r),this.tempBuffer=this.tempBuffer.slice(this.secondStartCodeOffset),this.fisrtStartCodeOffset=0,this.parsedOffset=2,this.state=oe.findFirstStartCode}}}}function se(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],i=[],u=new AbortController,l=null,x=null,j=null,I=!1,z=!1,H=[],Z=0,Q=0,Y=null,ee=null,oe=!1;const se="audio worker";let ae=()=>{const e=J();return{debug:e.debug,debugLevel:e.debugLevel,sampleRate:0,audioBufferSize:1024,videoBuffer:e.videoBuffer,isChrome:!1}},ie=function(){if(oe=!0,u)try{u.abort(),u=null,ue.debugLog(se,"abort success")}catch(e){u=null,ue.debugLog(se,"abort catch",e)}},ue={isDestroyed:!1,fetchStatus:M,_opt:ae(),mp3Demuxer:null,init:function(){ue.debugLog(se,"init and opt is",ue._opt);ue.stopId=setInterval((()=>{let e=(new Date).getTime();Y||(Y=e);const r=e-Y;r>100&&ue.debugWarn(se,`loop demux diff time is ${r}`),(()=>{let e=null;if(t.length)if(e=t[0],-1===ue.getDelay(e.ts))t.shift(),ue.doDecode(e);else for(;t.length;){if(e=t[0],!(ue.getDelay(e.ts)>ue._opt.videoBuffer)){ue.delay<0&&ue.debugWarn(se,`loop() do not decode and delay is ${ue.delay}, bufferList is ${t.length}`);break}t.shift(),ue.doDecode(e)}else-1!==ue.delay&&ue.debugLog(se,"loop() bufferList is empty and reset delay"),ue.resetAllDelay()})(),Y=(new Date).getTime()}),10)},doDecode:function(e){e.decoder.decode(e.payload,e.ts,e.isIFrame,e.cts)},getDelay:function(e){if(!e)return-1;if(ue.preDelayTimestamp&&ue.preDelayTimestamp>e)return ue.preDelayTimestamp-e>1e3&&ue.debugWarn(se,`getDelay() and preDelayTimestamp is ${ue.preDelayTimestamp} > timestamp is ${e} more than ${ue.preDelayTimestamp-e}ms`),ue.preDelayTimestamp=e,ue.delay;if(ue.firstTimestamp){if(e){const r=Date.now()-ue.startTimestamp,t=e-ue.firstTimestamp;ue.delay=r>=t?r-t:t-r}}else ue.firstTimestamp=e,ue.startTimestamp=Date.now(),ue.delay=-1;return ue.preDelayTimestamp=e,ue.delay},resetAllDelay:function(){ue.firstTimestamp=null,ue.startTimestamp=null,ue.delay=-1,ue.preDelayTimestamp=null},close:function(){if(ue.debugLog(se,"close"),ue.isDestroyed=!0,ie(),!l||1!==l.readyState&&2!==l.readyState?l&&ue.debugLog(se,`close() and socket.readyState is ${l.readyState}`):(oe=!0,l.close(1e3,"Client disconnecting")),l=null,ue.stopId&&(clearInterval(ue.stopId),ue.stopId=null),ue.mp3Demuxer&&(ue.mp3Demuxer.destroy(),ue.mp3Demuxer=null),ue.writableStream&&K(ue.writableStream.locked)&&ue.writableStream.close().catch((()=>{ue.debugLog("worker","close() and writableStream.close() error",e)})),ue.writableStream=null,le)try{le.clear&&le.clear(),le=null}catch(e){ue.debugWarn(se,"close() and audioDecoder.clear error",e)}x=null,ue._opt=ae(),t=[],i=[],j&&(j.close(),j=null),ue.resetAllDelay(),ue.fetchStatus=M,z=!1,H=[],Z=0,Q=0,Y=null,ee=null,postMessage({cmd:g})},fetchStream:function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ue.debugLog(se,"fetchStream, url is "+e,"options:",JSON.stringify(r)),x=V((e=>{postMessage({cmd:p,type:D,value:e})})),r.protocol===n?(r.isFlv&&(j=new re(ue.demuxFlv())),fetch(e,{signal:u.signal}).then((e=>{if(oe)return ue.debugLog(se,"request abort and run res.body.cancel()"),ue.fetchStatus=M,void e.body.cancel();if(!G(e))return ue.debugWarn(se,`fetch response status is ${e.status} and ok is ${e.ok} and emit error and next abort()`),ie(),void postMessage({cmd:p,type:F.fetchError,value:`fetch response status is ${e.status} and ok is ${e.ok}`});if(postMessage({cmd:p,type:_}),q())ue.writableStream=new WritableStream({write:e=>u&&u.signal&&u.signal.aborted?(ue.debugLog(se,"writableStream write() and abortController.signal.aborted is true so return"),void(ue.fetchStatus=B)):X(oe)?(ue.debugLog(se,"writableStream write() and requestAbort is true so return"),ue.fetchStatus=B,void ie()):void("string"!=typeof e?(ue.fetchStatus=U,x(e.byteLength),j.write(e)):ue.debugWarn(se,`writableStream write() and value is "${e}" string so return`)),close:()=>{ue.debugLog(se,"writableStream close()"),ue.fetchStatus=B,j&&(j.close(),j=null),ie(),postMessage({cmd:p,type:C,value:s,msg:"fetch done"})},abort:e=>{if(u&&u.signal&&u.signal.aborted)return ue.debugLog(se,"writableStream abort() and abortController.signal.aborted is true so return"),void(ue.fetchStatus=B);j&&(j.close(),j=null),e.name!==L?(ue.debugLog(se,`writableStream abort() and e is ${e.toString()}`),ie(),postMessage({cmd:p,type:F.fetchError,value:e.toString()})):ue.debugLog(se,"writableStream abort() and e.name is AbortError so return")}}),e.body.pipeTo(ue.writableStream).catch((e=>{"AbortError"!==e.name&&ue.debugLog(se,"writableStream pipeTo() and e is",e.name,e.toString())}));else{const r=e.body.getReader(),t=()=>{r.read().then((e=>{let{done:r,value:o}=e;return r?(ue.debugLog(se,"fetchNext().then() and done is true"),ue.fetchStatus=B,j&&(j.close(),j=null),ie(),void postMessage({cmd:p,type:C,value:s,msg:"fetch done"})):u&&u.signal&&u.signal.aborted?(ue.debugLog(se,"fetchNext().then() and abortController.signal.aborted is true so return"),void(ue.fetchStatus=B)):X(oe)?(ue.debugLog(se,"fetchNext().then() and requestAbort is true so return"),ue.fetchStatus=B,void ie()):void("string"!=typeof o?(ue.fetchStatus=U,x(o.byteLength),j.write(o),t()):ue.debugWarn(se,`fetchNext().then() and value "${o}" is string so return`))})).catch((e=>{if(u&&u.signal&&u.signal.aborted)return ue.debugLog(se,"fetchNext().catch() and abortController.signal.aborted is true so return"),void(ue.fetchStatus=B);j&&(j.close(),j=null),e.name!==L?(ue.debugLog(se,`fetchNext().catch() and e is ${e.toString()}`),ie(),postMessage({cmd:p,type:F.fetchError,value:e.toString()})):ue.debugLog(se,"fetchNext().catch() and e.name is AbortError so return")}))};t()}})).catch((e=>{u&&u.signal&&u.signal.aborted?ue.debugLog(se,"fetch().catch() and abortController.signal.aborted is true so return"):e.name!==L?(ue.debugLog(se,`fetch().catch() and e is ${e.toString()}`),ie(),postMessage({cmd:p,type:F.fetchError,value:e.toString()}),j&&(j.close(),j=null)):ue.debugLog(se,"fetch().catch() and e.name is AbortError so return")}))):r.protocol===o&&(r.isFlv&&(j=new re(ue.demuxFlv())),l=new WebSocket(e,t),l.binaryType="arraybuffer",l.onopen=()=>{ue.debugLog(se,"fetchStream, WebsocketStream  socket open"),postMessage({cmd:p,type:_}),postMessage({cmd:p,type:T})},l.onclose=e=>{I?ue.debugLog(se,"fetchStream, WebsocketStream socket close and isSocketError is true , so return"):(ue.debugLog(se,`fetchStream, WebsocketStream socket close and code is ${e.code}`),1006===e.code&&ue.debugError(se,`fetchStream, WebsocketStream socket close abnormally and code is ${e.code}`),X(oe)?ue.debugLog(se,"fetchStream, WebsocketStream socket close and requestAbort is true so return"):(j&&(j.close(),j=null),postMessage({cmd:p,type:C,value:a,msg:e.code})))},l.onerror=e=>{ue.debugError(se,"fetchStream, WebsocketStream socket error",e),I=!0,j&&(j.close(),j=null),postMessage({cmd:p,type:F.websocketError,value:e.isTrusted?"websocket user aborted":"websocket error"})},l.onmessage=e=>{"string"!=typeof e.data?(x(e.data.byteLength),r.isFlv?j.write(e.data):r.isG711a||r.isG711u?ue.demuxG711(e.data,r):ue.demuxM7s(e.data)):ue.debugWarn(se,`socket on message is string "${e.data}" and return`)})},demuxFlv:function*(){yield 9;const e=new ArrayBuffer(4),r=new Uint8Array(e),t=new Uint32Array(e);for(;;){r[3]=0;const e=yield 15,o=e[4];r[0]=e[7],r[1]=e[6],r[2]=e[5];const n=t[0];r[0]=e[10],r[1]=e[9],r[2]=e[8],r[3]=e[11];let s=t[0];const a=(yield n).slice();if(o===v)ue.decode(a,{type:y,ts:s})}},decode:function(e,r){postMessage({cmd:p,type:A,value:e.byteLength}),ue.pushBuffer(e,r.ts)},setCodecAudio:function(e,r){const t=e[0]>>4,o=e[0]>>1&1;if(ee=t===$?o?16:8:0===o?8:16,le&&le.setCodec)if(N(e)||t===R||t===O||t===W){ue.debugLog(se,`setCodecAudio: init audio codec, codeId is ${t}`);const o=t===$?e.slice(2):new Uint8Array(0);le.setCodec(t,ue._opt.sampleRate,o),z=!0,t!==$&&(t===W?(ue.mp3Demuxer||(ue.mp3Demuxer=new ne(ue),ue.mp3Demuxer.on("data",((e,r)=>{le.decode(e,r)}))),ue.mp3Demuxer.dispatch(e.slice(1),r)):le.decode(e.slice(1),r));{const e=Number("1")||1;setTimeout((()=>{ue.debugError(se,"Jb pro 体验结束,请刷新页面再次体验(wasm内部会暂停解码)，如需要购买商业授权，可以联系微信：bosswancheng"),ue.close(),postMessage({cmd:m})}),60*e*60*1e3)}}else ue.debugWarn(se,"setCodecAudio: hasInitAudioCodec is false, codecId is ",t);else ue.debugError(se,"setCodecAudio: audioDecoder or audioDecoder.setCodec is null")},pushBuffer:function(e,r){N(e)?ue.decodeAudio(e,r):t.push({ts:r,payload:e,decoder:{decode:ue.decodeAudio},isIFrame:!1})},decodeAudio:function(e,r){const t=e[0]>>4;z?t===W?ue.mp3Demuxer.dispatch(e.slice(1),r):le.decode(t===$?e.slice(2):e.slice(1),r):ue.setCodecAudio(e)},demuxM7s:function(e){const r=new DataView(e),t=r.getUint32(1,!1);if(r.getUint8(0)===y)ue.decode(new Uint8Array(e,5),{type:y,ts:t})},demuxG711:function(e,r){ue.currentG711Ts||(ue.currentG711Ts=0),ue.stashBuffer||(ue.stashBuffer=new Float32Array(0));const t=new Float32Array(e.length+ue.stashBuffer.length);for(t.set(ue.stashBuffer,0),t.set(e,ue.stashBuffer.length),ue.stashBuffer=t;ue.stashBuffer.length>=160;){const e=ue.stashBuffer.slice(0,160);ue.stashBuffer=ue.stashBuffer.slice(160);let t=new Uint8Array(e.length+1);r.isG711a?(t.set([114],0),t.set(e,1)):r.isG711u&&(t.set([130],0),t.set(e,1)),ue.decodeAudio(t,ue.currentG711Ts),ue.currentG711Ts+=20}},audioInfo:function(e,r,t){postMessage({cmd:h,code:e}),postMessage({cmd:f,sampleRate:r,channels:t,depth:ee}),Q=t},pcmData:function(e,t,o){if(ue.isDestroyed)return void ue.debugLog(se,"pcmData, decoder is destroyed and return");let n=t,s=[],a=0,u=ue._opt.audioBufferSize;for(let t=0;t<2;t++){let o=r.HEAPU32[(e>>2)+t]>>2;s[t]=r.HEAPF32.subarray(o,o+n)}if(Z){if(!(n>=(t=u-Z)))return Z+=n,i[0]=Float32Array.of(...i[0],...s[0]),void(2==Q&&(i[1]=Float32Array.of(...i[1],...s[1])));H[0]=Float32Array.of(...i[0],...s[0].subarray(0,t)),2==Q&&(H[1]=Float32Array.of(...i[1],...s[1].subarray(0,t))),postMessage({cmd:c,buffer:H,delay:ue.delay,ts:o},H.map((e=>e.buffer))),a=t,n-=t}for(Z=n;Z>=u;Z-=u)H[0]=s[0].slice(a,a+=u),2==Q&&(H[1]=s[1].slice(a-u,a)),postMessage({cmd:c,buffer:H,delay:ue.delay,ts:o},H.map((e=>e.buffer)));Z&&(i[0]=s[0].slice(a),2==Q&&(i[1]=s[1].slice(a)))},sendWebsocketMessage:function(e){l?l.readyState===P?l.send(e):ue.debugError(se,"socket is not open"):ue.debugError(se,"socket is null")},timeEnd:function(){ue.debugError(se,"Jb pro 体验结束,请刷新页面再次体验(wasm内部会暂停解码)，如需要购买商业授权，可以联系微信：bosswancheng"),ue.close(),postMessage({cmd:m})},debugLog(e){if(ue._opt.debug&&ue.debug){for(var r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];ue.debug.log(e,...t)}},debugWarn(e){if(ue._opt.debug&&ue.debug){for(var r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];ue.debug.warn(e,...t)}},debugError(e){if(ue.debug){for(var r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];ue.debug.error(e,...t)}}};ue.debug=new te(ue);let le=null;r.AudioDecoder&&(le=new r.AudioDecoder(ue)),postMessage({cmd:d}),self.onmessage=function(e){let r=e.data;switch(r.cmd){case w:try{ue._opt=Object.assign(ue._opt,JSON.parse(r.opt))}catch(e){}ue.init();break;case S:ue.fetchStream(r.url,JSON.parse(r.opt),r.protocols);break;case b:ue.close();break;case E:ue.debugLog(se,"updateConfig",r.key,r.value),ue._opt[r.key]=r.value;break;case k:ue.sendWebsocketMessage(r.message)}}}Date.now||(Date.now=function(){return(new Date).getTime()}),t({printErr:function(e){(function(e){return!(!e||-1===e.indexOf("not compiled with thread support")&&-1===e.indexOf("illegal icc")&&!e.indexOf("If you want to help, upload a sample of this file to")&&!e.indexOf("Reserved SBR extensions is not implemented"))})(e)||console.warn("JbPro[❌❌❌][worker]:",e)}}).then((e=>{se(e)}))}));
